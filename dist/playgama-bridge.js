(() => { var t = { 258: t => { !function (e) { t.exports = e; var r = "listeners", n = { on: function (t, e) { return a(this, t).push(e), this }, once: function (t, e) { var r = this; return n.originalListener = e, a(r, t).push(n), r; function n() { i.call(r, t, n), e.apply(this, arguments) } }, off: i, emit: function (t, e) { var r = this, n = a(r, t, !0); if (!n) return !1; var o = arguments.length; if (1 === o) n.forEach((function (t) { t.call(r) })); else if (2 === o) n.forEach((function (t) { t.call(r, e) })); else { var i = Array.prototype.slice.call(arguments, 1); n.forEach((function (t) { t.apply(r, i) })) } return !!n.length } }; function o(t) { for (var e in n) t[e] = n[e]; return t } function i(t, e) { var n, o = this; if (arguments.length) { if (e) { if (n = a(o, t, !0)) { if (!(n = n.filter((function (t) { return t !== e && t.originalListener !== e }))).length) return i.call(o, t); o[r][t] = n } } else if ((n = o[r]) && (delete n[t], !Object.keys(n).length)) return i.call(o) } else delete o[r]; return o } function a(t, e, n) { if (!n || t[r]) { var o = t[r] || (t[r] = {}); return o[e] || (o[e] = []) } } o(e.prototype), e.mixin = o }((function t() { if (!(this instanceof t)) return new t })) } }, e = {}; function r(n) { var o = e[n]; if (void 0 !== o) return o.exports; var i = e[n] = { exports: {} }; return t[n](i, i.exports, r), i.exports } r.n = t => { var e = t && t.__esModule ? () => t.default : () => t; return r.d(e, { a: e }), e }, r.d = (t, e) => { for (var n in e) r.o(e, n) && !r.o(t, n) && Object.defineProperty(t, n, { enumerable: !0, get: e[n] }) }, r.o = (t, e) => Object.prototype.hasOwnProperty.call(t, e), (() => { "use strict"; var t = { VK: "vk", VK_PLAY: "vk_play", OK: "ok", YANDEX: "yandex", CRAZY_GAMES: "crazy_games", ABSOLUTE_GAMES: "absolute_games", GAME_DISTRIBUTION: "game_distribution", PLAYGAMA: "playgama", WORTAL: "wortal", PLAYDECK: "playdeck", TELEGRAM: "telegram", Y8: "y8", MOCK: "mock" }, e = { PLATFORM: "platform", PLAYER: "player", GAME: "game", STORAGE: "storage", ADVERTISEMENT: "advertisement", SOCIAL: "social", DEVICE: "device", LEADERBOARD: "leaderboard", PAYMENTS: "payments", REMOTE_CONFIG: "remote_config", CLIPBOARD: "clipboard" }, n = { INTERSTITIAL_STATE_CHANGED: "interstitial_state_changed", REWARDED_STATE_CHANGED: "rewarded_state_changed", BANNER_STATE_CHANGED: "banner_state_changed", VISIBILITY_STATE_CHANGED: "visibility_state_changed" }, o = { VISIBLE: "visible", HIDDEN: "hidden" }, i = { LOADING: "loading", OPENED: "opened", CLOSED: "closed", FAILED: "failed" }, a = { LOADING: "loading", OPENED: "opened", CLOSED: "closed", FAILED: "failed", REWARDED: "rewarded" }, s = { LOADING: "loading", SHOWN: "shown", HIDDEN: "hidden", FAILED: "failed" }, u = { LOCAL_STORAGE: "local_storage", PLATFORM_INTERNAL: "platform_internal" }, c = { DESKTOP: "desktop", MOBILE: "mobile", TABLET: "tablet", TV: "tv" }, l = { GAME_READY: "game_ready", IN_GAME_LOADING_STARTED: "in_game_loading_started", IN_GAME_LOADING_STOPPED: "in_game_loading_stopped", GAMEPLAY_STARTED: "gameplay_started", GAMEPLAY_STOPPED: "gameplay_stopped", PLAYER_GOT_ACHIEVEMENT: "player_got_achievement", GAME_OVER: "game_over" }, f = { INITIALIZE: "initialize", AUTHORIZE_PLAYER: "authorize_player", SHARE: "share", INVITE_FRIENDS: "invite_friends", JOIN_COMMUNITY: "join_community", CREATE_POST: "create_post", ADD_TO_HOME_SCREEN: "add_to_home_screen", ADD_TO_FAVORITES: "add_to_favorites", RATE: "rate", SET_LEADERBOARD_SCORE: "set_leaderboard_score", GET_LEADERBOARD_SCORE: "get_leaderboard_score", GET_LEADERBOARD_ENTRIES: "get_leaderboard_entries", GET_PURCHASES: "get_purchases", GET_CATALOG: "get_catalog", PURCHASE: "purchase", CONSUME_PURCHASE: "consume_purchase", GET_REMOTE_CONFIG: "get_remote_config", GET_STORAGE_DATA: "get_storage_data", SHOW_LEADERBOARD_NATIVE_POPUP: "show_leaderboard_native_popup", CLIPBOARD_WRITE: "clipboard_write", ADBLOCK_DETECT: "adblock_detect" }, p = { message: "Before using the SDK you must initialize it" }, y = { message: "Storage not supported" }, d = { message: "Storage not available" }, h = { message: "GameDistribution Game ID is undefined" }, m = { message: "VK Play Game ID is undefined" }, v = { message: "Y8 Game ID is undefined" }, _ = { message: "OK Game params are not found" }, b = { message: "Message is too long" }; function g(t) { return g = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, g(t) } function S(t, e) { for (var r = 0; r < e.length; r++) { var n = e[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, w(n.key), n) } } function w(t) { var e = function (t, e) { if ("object" != g(t) || !t) return t; var r = t[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(t, "string"); if ("object" != g(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(t) }(t); return "symbol" == g(e) ? e : String(e) } function E(t, e, r) { !function (t, e) { if (e.has(t)) throw new TypeError("Cannot initialize the same private elements twice on an object") }(t, e), e.set(t, r) } function P(t, e, r) { return function (t, e, r) { if (e.set) e.set.call(t, r); else { if (!e.writable) throw new TypeError("attempted to set read only private field"); e.value = r } }(t, O(t, e, "set"), r), r } function A(t, e) { return function (t, e) { return e.get ? e.get.call(t) : e.value }(t, O(t, e, "get")) } function O(t, e, r) { if (!e.has(t)) throw new TypeError("attempted to " + r + " private field on non-instance"); return e.get(t) } var k = new WeakMap, I = new WeakMap, T = new WeakMap; const D = function () { function t() { var e = this; !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), E(this, k, { writable: !0, value: void 0 }), E(this, I, { writable: !0, value: void 0 }), E(this, T, { writable: !0, value: void 0 }), P(this, k, new Promise((function (t, r) { P(e, I, t), P(e, T, r) }))) } var e, r; return e = t, (r = [{ key: "promise", get: function () { return A(this, k) } }, { key: "resolve", value: function (t) { A(this, I).call(this, t) } }, { key: "reject", value: function (t) { A(this, T).call(this, t) } }]) && S(e.prototype, r), Object.defineProperty(e, "prototype", { writable: !1 }), t }(); function R(t) { return R = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, R(t) } function L(t, e) { for (var r = 0; r < e.length; r++) { var n = e[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, j(n.key), n) } } function j(t) { var e = function (t, e) { if ("object" != R(t) || !t) return t; var r = t[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(t, "string"); if ("object" != R(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(t) }(t); return "symbol" == R(e) ? e : String(e) } const N = function () { function t(e) { var r, n, o; !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), r = this, o = void 0, (n = j(n = "_platformBridge")) in r ? Object.defineProperty(r, n, { value: o, enumerable: !0, configurable: !0, writable: !0 }) : r[n] = o, this._platformBridge = e } var e, r; return e = t, (r = [{ key: "initialize", value: function () { return Promise.resolve() } }]) && L(e.prototype, r), Object.defineProperty(e, "prototype", { writable: !1 }), t }(); function C(t) { return C = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, C(t) } function B(t, e) { for (var r = 0; r < e.length; r++) { var n = e[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, M(n.key), n) } } function M(t) { var e = function (t, e) { if ("object" != C(t) || !t) return t; var r = t[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(t, "string"); if ("object" != C(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(t) }(t); return "symbol" == C(e) ? e : String(e) } function F(t, e) { return F = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t }, F(t, e) } function G(t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t } function W(t) { return W = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t) }, W(t) } function z(t, e, r) { if (!e.has(t)) throw new TypeError("attempted to " + r + " private field on non-instance"); return e.get(t) } var U = new WeakMap; const H = function (t) { !function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && F(t, e) }(a, t); var e, r, n, o, i = (n = a, o = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (t) { return !1 } }(), function () { var t, e = W(n); if (o) { var r = W(this).constructor; t = Reflect.construct(e, arguments, r) } else t = e.apply(this, arguments); return function (t, e) { if (e && ("object" === C(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return G(t) }(this, t) }); function a() { var t, e, r, n; !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, a); for (var o = arguments.length, s = new Array(o), u = 0; u < o; u++)s[u] = arguments[u]; return e = G(t = i.call.apply(i, [this].concat(s))), n = { writable: !0, value: !1 }, function (t, e) { if (e.has(t)) throw new TypeError("Cannot initialize the same private elements twice on an object") }(e, r = U), r.set(e, n), t } return e = a, (r = [{ key: "id", get: function () { return this._platformBridge.platformId } }, { key: "sdk", get: function () { return this._platformBridge.platformSdk } }, { key: "language", get: function () { return this._platformBridge.platformLanguage } }, { key: "payload", get: function () { return this._platformBridge.platformPayload } }, { key: "tld", get: function () { return this._platformBridge.platformTld } }, { key: "sendMessage", value: function (t) { if (t === l.GAME_READY) { if (function (t, e) { return e.get ? e.get.call(t) : e.value }(this, z(this, U, "get"))) return Promise.reject(); !function (t, e, r) { (function (t, e, r) { if (e.set) e.set.call(t, r); else { if (!e.writable) throw new TypeError("attempted to set read only private field"); e.value = r } })(t, z(t, e, "set"), r) }(this, U, !0) } return this._platformBridge.sendMessage(t) } }, { key: "getServerTime", value: function () { return this._platformBridge.getServerTime() } }]) && B(e.prototype, r), Object.defineProperty(e, "prototype", { writable: !1 }), a }(N); function x(t) { return x = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, x(t) } function Y(t, e) { for (var r = 0; r < e.length; r++) { var n = e[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, V(n.key), n) } } function V(t) { var e = function (t, e) { if ("object" != x(t) || !t) return t; var r = t[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(t, "string"); if ("object" != x(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(t) }(t); return "symbol" == x(e) ? e : String(e) } function Z(t, e) { return Z = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t }, Z(t, e) } function K(t) { return K = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t) }, K(t) } const J = function (t) { !function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && Z(t, e) }(a, t); var e, r, n, o, i = (n = a, o = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (t) { return !1 } }(), function () { var t, e = K(n); if (o) { var r = K(this).constructor; t = Reflect.construct(e, arguments, r) } else t = e.apply(this, arguments); return function (t, e) { if (e && ("object" === x(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) }(this, t) }); function a() { return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, a), i.apply(this, arguments) } return e = a, (r = [{ key: "isAuthorizationSupported", get: function () { return this._platformBridge.isPlayerAuthorizationSupported } }, { key: "isAuthorized", get: function () { return this._platformBridge.isPlayerAuthorized } }, { key: "id", get: function () { return this._platformBridge.playerId } }, { key: "name", get: function () { return this._platformBridge.playerName } }, { key: "photos", get: function () { return this._platformBridge.playerPhotos } }, { key: "authorize", value: function (t) { if (t) { var e = t[this._platformBridge.platformId]; if (e) return this.authorize(e) } return this._platformBridge.authorizePlayer(t) } }]) && Y(e.prototype, r), Object.defineProperty(e, "prototype", { writable: !1 }), a }(N); var q = r(258), X = r.n(q); function $(t) { return $ = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, $(t) } function Q(t, e) { for (var r = 0; r < e.length; r++) { var n = e[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, tt(n.key), n) } } function tt(t) { var e = function (t, e) { if ("object" != $(t) || !t) return t; var r = t[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(t, "string"); if ("object" != $(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(t) }(t); return "symbol" == $(e) ? e : String(e) } function et(t, e) { return et = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t }, et(t, e) } function rt(t) { return rt = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t) }, rt(t) } var nt = function (t) { !function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && et(t, e) }(s, t); var e, r, o, i, a = (o = s, i = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (t) { return !1 } }(), function () { var t, e = rt(o); if (i) { var r = rt(this).constructor; t = Reflect.construct(e, arguments, r) } else t = e.apply(this, arguments); return function (t, e) { if (e && ("object" === $(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) }(this, t) }); function s(t) { var e; return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, s), (e = a.call(this, t))._platformBridge.on(n.VISIBILITY_STATE_CHANGED, (function (t) { return e.emit(n.VISIBILITY_STATE_CHANGED, t) })), e } return e = s, (r = [{ key: "visibilityState", get: function () { return this._platformBridge.visibilityState } }]) && Q(e.prototype, r), Object.defineProperty(e, "prototype", { writable: !1 }), s }(N); X().mixin(nt.prototype); const ot = nt; function it(t) { return it = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, it(t) } function at(t, e) { for (var r = 0; r < e.length; r++) { var n = e[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, st(n.key), n) } } function st(t) { var e = function (t, e) { if ("object" != it(t) || !t) return t; var r = t[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(t, "string"); if ("object" != it(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(t) }(t); return "symbol" == it(e) ? e : String(e) } function ut(t, e) { return ut = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t }, ut(t, e) } function ct(t) { return ct = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t) }, ct(t) } const lt = function (t) { !function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && ut(t, e) }(a, t); var e, r, n, o, i = (n = a, o = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (t) { return !1 } }(), function () { var t, e = ct(n); if (o) { var r = ct(this).constructor; t = Reflect.construct(e, arguments, r) } else t = e.apply(this, arguments); return function (t, e) { if (e && ("object" === it(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) }(this, t) }); function a() { return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, a), i.apply(this, arguments) } return e = a, r = [{ key: "defaultType", get: function () { return this._platformBridge.defaultStorageType } }, { key: "isSupported", value: function (t) { if (t) { var e = t[this._platformBridge.platformId]; if (e) return this.isSupported(e) } return this._platformBridge.isStorageSupported(t) } }, { key: "isAvailable", value: function (t) { if (t) { var e = t[this._platformBridge.platformId]; if (e) return this.isSupported(e) } return this._platformBridge.isStorageAvailable(t) } }, { key: "get", value: function (t, e) { var r = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2]; if (e) { var n = e[this._platformBridge.platformId]; if (n) return this.get(t, n, r) } var o = e; return o || (o = this.defaultType), this._platformBridge.isStorageAvailable(o) ? this._platformBridge.getDataFromStorage(t, o, r) : Promise.reject() } }, { key: "set", value: function (t, e, r) { if (r) { var n = r[this._platformBridge.platformId]; if (n) return this.set(t, e, n) } var o = r; return o || (o = this.defaultType), this._platformBridge.isStorageAvailable(o) ? this._platformBridge.setDataToStorage(t, e, o) : Promise.reject() } }, { key: "delete", value: function (t, e) { if (e) { var r = e[this._platformBridge.platformId]; if (r) return this.delete(t, r) } var n = e; return n || (n = this.defaultType), this._platformBridge.isStorageAvailable(n) ? this._platformBridge.deleteDataFromStorage(t, n) : Promise.reject() } }], r && at(e.prototype, r), Object.defineProperty(e, "prototype", { writable: !1 }), a }(N); function ft(t) { return ft = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, ft(t) } function pt(t, e) { for (var r = 0; r < e.length; r++) { var n = e[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, yt(n.key), n) } } function yt(t) { var e = function (t, e) { if ("object" != ft(t) || !t) return t; var r = t[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(t, "string"); if ("object" != ft(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(t) }(t); return "symbol" == ft(e) ? e : String(e) } function dt(t, e) { mt(t, e), e.add(t) } function ht(t, e, r) { mt(t, e), e.set(t, r) } function mt(t, e) { if (e.has(t)) throw new TypeError("Cannot initialize the same private elements twice on an object") } function vt(t, e, r) { if (!e.has(t)) throw new TypeError("attempted to get private field on non-instance"); return r } function _t(t, e, r) { return function (t, e, r) { if (e.set) e.set.call(t, r); else { if (!e.writable) throw new TypeError("attempted to set read only private field"); e.value = r } }(t, gt(t, e, "set"), r), r } function bt(t, e) { return function (t, e) { return e.get ? e.get.call(t) : e.value }(t, gt(t, e, "get")) } function gt(t, e, r) { if (!e.has(t)) throw new TypeError("attempted to " + r + " private field on non-instance"); return e.get(t) } var St = "created", wt = "completed", Et = new WeakMap, Pt = new WeakMap, At = new WeakMap, Ot = new WeakMap, kt = new WeakSet, It = new WeakSet, Tt = function () { function t(e) { !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), dt(this, It), dt(this, kt), ht(this, Et, { writable: !0, value: 0 }), ht(this, Pt, { writable: !0, value: 0 }), ht(this, At, { writable: !0, value: St }), ht(this, Ot, { writable: !0, value: 0 }), _t(this, Et, e) } var e, r; return e = t, (r = [{ key: "state", get: function () { return bt(this, At) } }, { key: "start", value: function () { var t = this; bt(this, At) !== St && bt(this, At) !== wt || (_t(this, Pt, bt(this, Et)), vt(this, kt, Dt).call(this, "started"), _t(this, Ot, setInterval((function () { _t(t, Pt, bt(t, Pt) - 1), t.emit("time_left_changed", bt(t, Pt)), bt(t, Pt) <= 0 && (vt(t, It, Rt).call(t), vt(t, kt, Dt).call(t, wt)) }), 1e3))) } }, { key: "stop", value: function () { vt(this, It, Rt).call(this), vt(this, kt, Dt).call(this, "stopped") } }]) && pt(e.prototype, r), Object.defineProperty(e, "prototype", { writable: !1 }), t }(); function Dt(t) { _t(this, At, t), this.emit("state_changed", bt(this, At)) } function Rt() { _t(this, Pt, 0), clearInterval(bt(this, Ot)) } X().mixin(Tt.prototype); const Lt = Tt; function jt(t) { return jt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, jt(t) } function Nt(t, e) { for (var r = 0; r < e.length; r++) { var n = e[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, Ct(n.key), n) } } function Ct(t) { var e = function (t, e) { if ("object" != jt(t) || !t) return t; var r = t[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(t, "string"); if ("object" != jt(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(t) }(t); return "symbol" == jt(e) ? e : String(e) } function Bt(t, e) { return Bt = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t }, Bt(t, e) } function Mt(t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t } function Ft(t) { return Ft = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t) }, Ft(t) } function Gt(t, e) { zt(t, e), e.add(t) } function Wt(t, e, r) { zt(t, e), e.set(t, r) } function zt(t, e) { if (e.has(t)) throw new TypeError("Cannot initialize the same private elements twice on an object") } function Ut(t, e, r) { return function (t, e, r) { if (e.set) e.set.call(t, r); else { if (!e.writable) throw new TypeError("attempted to set read only private field"); e.value = r } }(t, Yt(t, e, "set"), r), r } function Ht(t, e, r) { if (!e.has(t)) throw new TypeError("attempted to get private field on non-instance"); return r } function xt(t, e) { return function (t, e) { return e.get ? e.get.call(t) : e.value }(t, Yt(t, e, "get")) } function Yt(t, e, r) { if (!e.has(t)) throw new TypeError("attempted to " + r + " private field on non-instance"); return e.get(t) } var Vt = new WeakMap, Zt = new WeakMap, Kt = new WeakSet, Jt = new WeakSet, qt = function (t) { !function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && Bt(t, e) }(l, t); var e, r, o, u, c = (o = l, u = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (t) { return !1 } }(), function () { var t, e = Ft(o); if (u) { var r = Ft(this).constructor; t = Reflect.construct(e, arguments, r) } else t = e.apply(this, arguments); return function (t, e) { if (e && ("object" === jt(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return Mt(t) }(this, t) }); function l(t) { var e; return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, l), Gt(Mt(e = c.call(this, t)), Jt), Gt(Mt(e), Kt), Wt(Mt(e), Vt, { writable: !0, value: void 0 }), Wt(Mt(e), Zt, { writable: !0, value: 60 }), e._platformBridge.on(n.INTERSTITIAL_STATE_CHANGED, (function (t) { t === i.CLOSED && xt(Mt(e), Zt) > 0 && Ht(Mt(e), Kt, Xt).call(Mt(e)), e.emit(n.INTERSTITIAL_STATE_CHANGED, t) })), e._platformBridge.on(n.REWARDED_STATE_CHANGED, (function (t) { return e.emit(n.REWARDED_STATE_CHANGED, t) })), e._platformBridge.on(n.BANNER_STATE_CHANGED, (function (t) { return e.emit(n.BANNER_STATE_CHANGED, t) })), e } return e = l, (r = [{ key: "isBannerSupported", get: function () { return this._platformBridge.isBannerSupported } }, { key: "bannerState", get: function () { return this._platformBridge.bannerState } }, { key: "interstitialState", get: function () { return this._platformBridge.interstitialState } }, { key: "rewardedState", get: function () { return this._platformBridge.rewardedState } }, { key: "minimumDelayBetweenInterstitial", get: function () { return xt(this, Zt) } }, { key: "setMinimumDelayBetweenInterstitial", value: function (t) { if (t) { var e = t[this._platformBridge.platformId]; if (void 0 !== e) return void this.setMinimumDelayBetweenInterstitial(e) } var r = jt(t), n = xt(this, Zt); switch (r) { case "number": n = t; break; case "string": if (n = parseInt(t, 10), Number.isNaN(n)) return; break; default: return }Ut(this, Zt, n), xt(this, Vt) && (xt(this, Vt).stop(), Ht(this, Kt, Xt).call(this)) } }, { key: "showBanner", value: function (t) { if (t) { var e = t[this._platformBridge.platformId]; if (e) return void this.showBanner(e) } this.bannerState !== s.LOADING && this.bannerState !== s.SHOWN && (this._platformBridge._setBannerState(s.LOADING), this.isBannerSupported ? this._platformBridge.showBanner(t) : this._platformBridge._setBannerState(s.FAILED)) } }, { key: "hideBanner", value: function () { this.bannerState !== s.LOADING && this.bannerState !== s.HIDDEN && this.isBannerSupported && this._platformBridge.hideBanner() } }, { key: "showInterstitial", value: function (t) { if (console.log("AdvertisementModule"), !Ht(this, Jt, $t).call(this)) { if (t) { var e = t[this._platformBridge.platformId]; if (e) return void this.showInterstitial(e) } var r = !1; t && "boolean" == typeof t.ignoreDelay && (r = t.ignoreDelay), this._platformBridge._setInterstitialState(i.LOADING), !xt(this, Vt) || xt(this, Vt).state === wt || r ? this._platformBridge.showInterstitial(t) : this._platformBridge._setInterstitialState(i.FAILED) } } }, { key: "showRewarded", value: function (t) { if (!Ht(this, Jt, $t).call(this)) { if (t) { var e = t[this._platformBridge.platformId]; if (e) return void this.showRewarded(e) } this._platformBridge._setRewardedState(a.LOADING), this._platformBridge.showRewarded(t) } } }, { key: "checkAdBlock", value: function () { return this._platformBridge.checkAdBlock() } }]) && Nt(e.prototype, r), Object.defineProperty(e, "prototype", { writable: !1 }), l }(N); function Xt() { Ut(this, Vt, new Lt(xt(this, Zt))), xt(this, Vt).start() } function $t() { return this.interstitialState === i.LOADING || this.interstitialState === i.OPENED || !![a.LOADING, a.OPENED, a.REWARDED].includes(this.rewardedState) } X().mixin(qt.prototype); const Qt = qt; function te(t) { return te = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, te(t) } function ee(t, e) { for (var r = 0; r < e.length; r++) { var n = e[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, re(n.key), n) } } function re(t) { var e = function (t, e) { if ("object" != te(t) || !t) return t; var r = t[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(t, "string"); if ("object" != te(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(t) }(t); return "symbol" == te(e) ? e : String(e) } function ne(t, e) { return ne = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t }, ne(t, e) } function oe(t) { return oe = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t) }, oe(t) } const ie = function (t) { !function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && ne(t, e) }(a, t); var e, r, n, o, i = (n = a, o = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (t) { return !1 } }(), function () { var t, e = oe(n); if (o) { var r = oe(this).constructor; t = Reflect.construct(e, arguments, r) } else t = e.apply(this, arguments); return function (t, e) { if (e && ("object" === te(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) }(this, t) }); function a() { return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, a), i.apply(this, arguments) } return e = a, (r = [{ key: "isInviteFriendsSupported", get: function () { return this._platformBridge.isInviteFriendsSupported } }, { key: "isJoinCommunitySupported", get: function () { return this._platformBridge.isJoinCommunitySupported } }, { key: "isShareSupported", get: function () { return this._platformBridge.isShareSupported } }, { key: "isCreatePostSupported", get: function () { return this._platformBridge.isCreatePostSupported } }, { key: "isAddToHomeScreenSupported", get: function () { return this._platformBridge.isAddToHomeScreenSupported } }, { key: "isAddToFavoritesSupported", get: function () { return this._platformBridge.isAddToFavoritesSupported } }, { key: "isRateSupported", get: function () { return this._platformBridge.isRateSupported } }, { key: "isExternalLinksAllowed", get: function () { return this._platformBridge.isExternalLinksAllowed } }, { key: "inviteFriends", value: function (t) { if (t) { var e = t[this._platformBridge.platformId]; if (e) return this.inviteFriends(e) } return this._platformBridge.inviteFriends(t) } }, { key: "joinCommunity", value: function (t) { if (t) { var e = t[this._platformBridge.platformId]; if (e) return this.joinCommunity(e) } return this._platformBridge.joinCommunity(t) } }, { key: "share", value: function (t) { if (t) { var e = t[this._platformBridge.platformId]; if (e) return this.share(e) } return this._platformBridge.share(t) } }, { key: "createPost", value: function (t) { if (t) { var e = t[this._platformBridge.platformId]; if (e) return this.createPost(e) } return this._platformBridge.createPost(t) } }, { key: "addToHomeScreen", value: function () { return this._platformBridge.addToHomeScreen() } }, { key: "addToFavorites", value: function () { return this._platformBridge.addToFavorites() } }, { key: "rate", value: function () { return this._platformBridge.rate() } }]) && ee(e.prototype, r), Object.defineProperty(e, "prototype", { writable: !1 }), a }(N); function ae(t) { return ae = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, ae(t) } function se(t, e) { for (var r = 0; r < e.length; r++) { var n = e[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, ue(n.key), n) } } function ue(t) { var e = function (t, e) { if ("object" != ae(t) || !t) return t; var r = t[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(t, "string"); if ("object" != ae(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(t) }(t); return "symbol" == ae(e) ? e : String(e) } function ce(t, e) { return ce = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t }, ce(t, e) } function le(t) { return le = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t) }, le(t) } const fe = function (t) { !function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && ce(t, e) }(a, t); var e, r, n, o, i = (n = a, o = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (t) { return !1 } }(), function () { var t, e = le(n); if (o) { var r = le(this).constructor; t = Reflect.construct(e, arguments, r) } else t = e.apply(this, arguments); return function (t, e) { if (e && ("object" === ae(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) }(this, t) }); function a() { return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, a), i.apply(this, arguments) } return e = a, (r = [{ key: "type", get: function () { return this._platformBridge.deviceType } }]) && se(e.prototype, r), Object.defineProperty(e, "prototype", { writable: !1 }), a }(N); function pe(t) { return pe = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, pe(t) } function ye(t, e) { for (var r = 0; r < e.length; r++) { var n = e[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, de(n.key), n) } } function de(t) { var e = function (t, e) { if ("object" != pe(t) || !t) return t; var r = t[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(t, "string"); if ("object" != pe(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(t) }(t); return "symbol" == pe(e) ? e : String(e) } function he(t, e) { return he = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t }, he(t, e) } function me(t) { return me = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t) }, me(t) } const ve = function (t) { !function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && he(t, e) }(a, t); var e, r, n, o, i = (n = a, o = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (t) { return !1 } }(), function () { var t, e = me(n); if (o) { var r = me(this).constructor; t = Reflect.construct(e, arguments, r) } else t = e.apply(this, arguments); return function (t, e) { if (e && ("object" === pe(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) }(this, t) }); function a() { return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, a), i.apply(this, arguments) } return e = a, (r = [{ key: "isSupported", get: function () { return this._platformBridge.isLeaderboardSupported } }, { key: "isNativePopupSupported", get: function () { return this._platformBridge.isLeaderboardNativePopupSupported } }, { key: "isMultipleBoardsSupported", get: function () { return this._platformBridge.isLeaderboardMultipleBoardsSupported } }, { key: "isSetScoreSupported", get: function () { return this._platformBridge.isLeaderboardSetScoreSupported } }, { key: "isGetScoreSupported", get: function () { return this._platformBridge.isLeaderboardGetScoreSupported } }, { key: "isGetEntriesSupported", get: function () { return this._platformBridge.isLeaderboardGetEntriesSupported } }, { key: "setScore", value: function (t) { if (t) { var e = t[this._platformBridge.platformId]; if (e) return this.setScore(e) } return this._platformBridge.setLeaderboardScore(t) } }, { key: "getScore", value: function (t) { if (t) { var e = t[this._platformBridge.platformId]; if (e) return this.getScore(e) } return this._platformBridge.getLeaderboardScore(t) } }, { key: "getEntries", value: function (t) { if (t) { var e = t[this._platformBridge.platformId]; if (e) return this.getEntries(e) } return this._platformBridge.getLeaderboardEntries(t) } }, { key: "showNativePopup", value: function (t) { if (t) { var e = t[this._platformBridge.platformId]; if (e) return this.showNativePopup(e) } return this._platformBridge.showLeaderboardNativePopup(t) } }]) && ye(e.prototype, r), Object.defineProperty(e, "prototype", { writable: !1 }), a }(N); function _e(t) { return _e = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, _e(t) } function be(t, e) { for (var r = 0; r < e.length; r++) { var n = e[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, ge(n.key), n) } } function ge(t) { var e = function (t, e) { if ("object" != _e(t) || !t) return t; var r = t[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(t, "string"); if ("object" != _e(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(t) }(t); return "symbol" == _e(e) ? e : String(e) } function Se(t, e) { return Se = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t }, Se(t, e) } function we(t) { return we = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t) }, we(t) } const Ee = function (t) { !function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && Se(t, e) }(a, t); var e, r, n, o, i = (n = a, o = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (t) { return !1 } }(), function () { var t, e = we(n); if (o) { var r = we(this).constructor; t = Reflect.construct(e, arguments, r) } else t = e.apply(this, arguments); return function (t, e) { if (e && ("object" === _e(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) }(this, t) }); function a() { return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, a), i.apply(this, arguments) } return e = a, (r = [{ key: "isSupported", get: function () { return this._platformBridge.isPaymentsSupported } }, { key: "purchase", value: function (t) { if (t) { var e = t[this._platformBridge.platformId]; if (e) return this.purchase(e) } return this._platformBridge.purchase(t) } }, { key: "getPurchases", value: function () { return this._platformBridge.getPaymentsPurchases() } }, { key: "getCatalog", value: function () { return this._platformBridge.getPaymentsCatalog() } }, { key: "consumePurchase", value: function (t) { if (t) { var e = t[this._platformBridge.platformId]; if (e) return this.consumePurchase(e) } return this._platformBridge.consumePurchase(t) } }]) && be(e.prototype, r), Object.defineProperty(e, "prototype", { writable: !1 }), a }(N); function Pe(t) { return Pe = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, Pe(t) } function Ae(t, e) { for (var r = 0; r < e.length; r++) { var n = e[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, Oe(n.key), n) } } function Oe(t) { var e = function (t, e) { if ("object" != Pe(t) || !t) return t; var r = t[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(t, "string"); if ("object" != Pe(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(t) }(t); return "symbol" == Pe(e) ? e : String(e) } function ke(t, e) { return ke = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t }, ke(t, e) } function Ie(t) { return Ie = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t) }, Ie(t) } const Te = function (t) { !function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && ke(t, e) }(a, t); var e, r, n, o, i = (n = a, o = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (t) { return !1 } }(), function () { var t, e = Ie(n); if (o) { var r = Ie(this).constructor; t = Reflect.construct(e, arguments, r) } else t = e.apply(this, arguments); return function (t, e) { if (e && ("object" === Pe(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) }(this, t) }); function a() { return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, a), i.apply(this, arguments) } return e = a, (r = [{ key: "isSupported", get: function () { return this._platformBridge.isRemoteConfigSupported } }, { key: "get", value: function (t) { if (t) { var e = t[this._platformBridge.platformId]; if (e) return this.get(e) } return this._platformBridge.getRemoteConfig(t) } }]) && Ae(e.prototype, r), Object.defineProperty(e, "prototype", { writable: !1 }), a }(N); function De(t) { return De = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, De(t) } function Re(t, e) { for (var r = 0; r < e.length; r++) { var n = e[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, Le(n.key), n) } } function Le(t) { var e = function (t, e) { if ("object" != De(t) || !t) return t; var r = t[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(t, "string"); if ("object" != De(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(t) }(t); return "symbol" == De(e) ? e : String(e) } function je(t, e) { return je = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t }, je(t, e) } function Ne(t) { return Ne = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t) }, Ne(t) } const Ce = function (t) { !function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && je(t, e) }(a, t); var e, r, n, o, i = (n = a, o = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (t) { return !1 } }(), function () { var t, e = Ne(n); if (o) { var r = Ne(this).constructor; t = Reflect.construct(e, arguments, r) } else t = e.apply(this, arguments); return function (t, e) { if (e && ("object" === De(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) }(this, t) }); function a() { return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, a), i.apply(this, arguments) } return e = a, (r = [{ key: "isSupported", get: function () { return this._platformBridge.isClipboardSupported } }, { key: "read", value: function () { return this._platformBridge.clipboardRead() } }, { key: "write", value: function (t) { return this._platformBridge.clipboardWrite(t) } }]) && Re(e.prototype, r), Object.defineProperty(e, "prototype", { writable: !1 }), a }(N); function Be(t) { return Be = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, Be(t) } function Me(t, e) { var r = Object.keys(t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(t); e && (n = n.filter((function (e) { return Object.getOwnPropertyDescriptor(t, e).enumerable }))), r.push.apply(r, n) } return r } function Fe(t, e) { for (var r = 0; r < e.length; r++) { var n = e[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, We(n.key), n) } } function Ge(t, e, r) { return (e = We(e)) in t ? Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }) : t[e] = r, t } function We(t) { var e = function (t, e) { if ("object" != Be(t) || !t) return t; var r = t[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(t, "string"); if ("object" != Be(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(t) }(t); return "symbol" == Be(e) ? e : String(e) } function ze(t, e) { var r = function (t, e, r) { if (!e.has(t)) throw new TypeError("attempted to get private field on non-instance"); return e.get(t) }(t, e); return function (t, e) { return e.get ? e.get.call(t) : e.value }(t, r) } var Ue = new WeakMap, He = function () { function e(t) { var r, i, a, s = this; !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e), Ge(this, "_isInitialized", !1), Ge(this, "_platformSdk", null), Ge(this, "_isPlayerAuthorized", !1), Ge(this, "_playerId", null), Ge(this, "_playerName", null), Ge(this, "_playerPhotos", []), Ge(this, "_visibilityState", null), Ge(this, "_localStorage", null), Ge(this, "_defaultStorageType", u.LOCAL_STORAGE), Ge(this, "_platformStorageCachedData", null), Ge(this, "_isBannerSupported", !1), Ge(this, "_interstitialState", null), Ge(this, "_rewardedState", null), Ge(this, "_bannerState", null), a = { writable: !0, value: {} }, function (t, e) { if (e.has(t)) throw new TypeError("Cannot initialize the same private elements twice on an object") }(r = this, i = Ue), i.set(r, a); try { this._localStorage = window.localStorage } catch (t) { } this._visibilityState = "visible" === document.visibilityState ? o.VISIBLE : o.HIDDEN, document.addEventListener("visibilitychange", (function () { s._visibilityState = "visible" === document.visibilityState ? o.VISIBLE : o.HIDDEN, s.emit(n.VISIBILITY_STATE_CHANGED, s._visibilityState) })), t && (this._options = function (t) { for (var e = 1; e < arguments.length; e++) { var r = null != arguments[e] ? arguments[e] : {}; e % 2 ? Me(Object(r), !0).forEach((function (e) { Ge(t, e, r[e]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r)) : Me(Object(r)).forEach((function (e) { Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e)) })) } return t }({}, t)) } var r, l; return r = e, (l = [{ key: "platformId", get: function () { return t.MOCK } }, { key: "platformSdk", get: function () { return this._platformSdk } }, { key: "platformLanguage", get: function () { var t = navigator.language; return "string" == typeof t ? t.substring(0, 2).toLowerCase() : "en" } }, { key: "platformPayload", get: function () { return new URL(window.location.href).searchParams.get("payload") } }, { key: "platformTld", get: function () { return null } }, { key: "visibilityState", get: function () { return this._visibilityState } }, { key: "isPlayerAuthorizationSupported", get: function () { return !1 } }, { key: "isPlayerAuthorized", get: function () { return this._isPlayerAuthorized } }, { key: "playerId", get: function () { return this._playerId } }, { key: "playerName", get: function () { return this._playerName } }, { key: "playerPhotos", get: function () { return this._playerPhotos } }, { key: "defaultStorageType", get: function () { return this._defaultStorageType } }, { key: "isBannerSupported", get: function () { return this._isBannerSupported } }, { key: "bannerState", get: function () { return this._bannerState } }, { key: "interstitialState", get: function () { return this._interstitialState } }, { key: "rewardedState", get: function () { return this._rewardedState } }, { key: "isInviteFriendsSupported", get: function () { return !1 } }, { key: "isJoinCommunitySupported", get: function () { return !1 } }, { key: "isShareSupported", get: function () { return !1 } }, { key: "isCreatePostSupported", get: function () { return !1 } }, { key: "isAddToHomeScreenSupported", get: function () { return !1 } }, { key: "isAddToFavoritesSupported", get: function () { return !1 } }, { key: "isRateSupported", get: function () { return !1 } }, { key: "isExternalLinksAllowed", get: function () { return !0 } }, { key: "deviceType", get: function () { if (navigator && navigator.userAgent) { var t = navigator.userAgent.toLowerCase(); if (/android|webos|iphone|ipod|blackberry|iemobile|opera mini/i.test(t)) return c.MOBILE; if (/ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP)))/.test(t)) return c.TABLET } return c.DESKTOP } }, { key: "isLeaderboardSupported", get: function () { return !1 } }, { key: "isLeaderboardNativePopupSupported", get: function () { return !1 } }, { key: "isLeaderboardMultipleBoardsSupported", get: function () { return !1 } }, { key: "isLeaderboardSetScoreSupported", get: function () { return !1 } }, { key: "isLeaderboardGetScoreSupported", get: function () { return !1 } }, { key: "isLeaderboardGetEntriesSupported", get: function () { return !1 } }, { key: "isPaymentsSupported", get: function () { return !1 } }, { key: "isRemoteConfigSupported", get: function () { return !1 } }, { key: "isClipboardSupported", get: function () { return !0 } }, { key: "initialize", value: function () { return Promise.resolve() } }, { key: "sendMessage", value: function () { return Promise.resolve() } }, { key: "getServerTime", value: function () { return new Promise((function (t, e) { fetch("https://worldtimeapi.org/api/timezone/Etc/UTC").then((function (t) { if (!t.ok) throw new Error("Network response was not ok"); return t.json() })).then((function (e) { t(1e3 * e.unixtime) })).catch((function () { e() })) })) } }, { key: "authorizePlayer", value: function () { return Promise.reject() } }, { key: "isStorageSupported", value: function (t) { switch (t) { case u.LOCAL_STORAGE: return null !== this._localStorage; case u.PLATFORM_INTERNAL: default: return !1 } } }, { key: "isStorageAvailable", value: function (t) { switch (t) { case u.LOCAL_STORAGE: return null !== this._localStorage; case u.PLATFORM_INTERNAL: default: return !1 } } }, { key: "getDataFromStorage", value: function (t, e, r) { if (e === u.LOCAL_STORAGE) { if (this._localStorage) { if (Array.isArray(t)) { for (var n = [], o = 0; o < t.length; o++)n.push(this._getDataFromLocalStorage(t[o], r)); return Promise.resolve(n) } var i = this._getDataFromLocalStorage(t, r); return Promise.resolve(i) } return Promise.reject(y) } return Promise.reject(y) } }, { key: "setDataToStorage", value: function (t, e, r) { if (r === u.LOCAL_STORAGE) { if (this._localStorage) { if (Array.isArray(t)) { for (var n = 0; n < t.length; n++)this._setDataToLocalStorage(t[n], e[n]); return Promise.resolve() } return this._setDataToLocalStorage(t, e), Promise.resolve() } return Promise.reject(y) } return Promise.reject(y) } }, { key: "deleteDataFromStorage", value: function (t, e) { if (e === u.LOCAL_STORAGE) { if (this._localStorage) { if (Array.isArray(t)) { for (var r = 0; r < t.length; r++)this._deleteDataFromLocalStorage(t[r]); return Promise.resolve() } return this._deleteDataFromLocalStorage(t), Promise.resolve() } return Promise.reject(y) } return Promise.reject(y) } }, { key: "showBanner", value: function () { this._setBannerState(s.FAILED) } }, { key: "hideBanner", value: function () { this._setBannerState(s.HIDDEN) } }, { key: "showInterstitial", value: function () { this._setInterstitialState(i.FAILED) } }, { key: "showRewarded", value: function () { this._setRewardedState(a.FAILED) } }, { key: "checkAdBlock", value: function () { var t = document.createElement("div"); t.className = "textads banner-ads banner_ads ad-unit ad-zone ad-space adsbox", t.style.position = "absolute", t.style.left = "-9999px", t.style.width = "1px", t.style.height = "1px", document.body.appendChild(t); var e = { method: "HEAD", mode: "no-cors" }; return new Promise((function (r) { fetch("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js", e).then((function (e) { e.redirected ? r(e.redirected) : window.setTimeout((function () { var e, n = 0 === t.offsetHeight || "none" === (null === (e = window.getComputedStyle(t)) || void 0 === e ? void 0 : e.display); r(n), t.remove() }), 100) })).catch((function () { r(!0) })) })) } }, { key: "inviteFriends", value: function () { return Promise.reject() } }, { key: "joinCommunity", value: function () { return Promise.reject() } }, { key: "share", value: function () { return Promise.reject() } }, { key: "createPost", value: function () { return Promise.reject() } }, { key: "addToHomeScreen", value: function () { return Promise.reject() } }, { key: "addToFavorites", value: function () { return Promise.reject() } }, { key: "rate", value: function () { return Promise.reject() } }, { key: "setLeaderboardScore", value: function () { return Promise.reject() } }, { key: "getLeaderboardScore", value: function () { return Promise.reject() } }, { key: "getLeaderboardEntries", value: function () { return Promise.reject() } }, { key: "showLeaderboardNativePopup", value: function () { return Promise.reject() } }, { key: "purchase", value: function () { return Promise.reject() } }, { key: "getPaymentsPurchases", value: function () { return Promise.reject() } }, { key: "getPaymentsCatalog", value: function () { return Promise.reject() } }, { key: "consumePurchase", value: function () { return Promise.reject() } }, { key: "getRemoteConfig", value: function () { return Promise.reject() } }, { key: "clipboardRead", value: function () { return window.navigator && window.navigator.clipboard ? window.navigator.clipboard.readText() : Promise.reject() } }, { key: "clipboardWrite", value: function (t) { return window.navigator && window.navigator.clipboard ? window.navigator.clipboard.writeText(t) : Promise.reject() } }, { key: "_getDataFromLocalStorage", value: function (t, e) { var r = this._localStorage.getItem(t); if (e && "string" == typeof r) try { r = JSON.parse(r) } catch (t) { } return r } }, { key: "_setDataToLocalStorage", value: function (t, e) { this._localStorage.setItem(t, "object" === Be(e) ? JSON.stringify(e) : e) } }, { key: "_deleteDataFromLocalStorage", value: function (t) { this._localStorage.removeItem(t) } }, { key: "_setInterstitialState", value: function (t) { console.log({ state: t }), this._interstitialState === t && t !== i.FAILED || (this._interstitialState = t, this.emit(n.INTERSTITIAL_STATE_CHANGED, this._interstitialState)) } }, { key: "_setRewardedState", value: function (t) { this._rewardedState === t && t !== a.FAILED || (this._rewardedState = t, this.emit(n.REWARDED_STATE_CHANGED, this._rewardedState)) } }, { key: "_setBannerState", value: function (t) { this._bannerState === t && t !== s.FAILED || (this._bannerState = t, this.emit(n.BANNER_STATE_CHANGED, this._bannerState)) } }, { key: "_createPromiseDecorator", value: function (t) { var e = new D; return ze(this, Ue)[t] = e, e } }, { key: "_getPromiseDecorator", value: function (t) { return ze(this, Ue)[t] } }, { key: "_resolvePromiseDecorator", value: function (t, e) { ze(this, Ue)[t] && (ze(this, Ue)[t].resolve(e), delete ze(this, Ue)[t]) } }, { key: "_rejectPromiseDecorator", value: function (t, e) { ze(this, Ue)[t] && (ze(this, Ue)[t].reject(e), delete ze(this, Ue)[t]) } }]) && Fe(r.prototype, l), Object.defineProperty(r, "prototype", { writable: !1 }), e }(); X().mixin(He.prototype); const xe = He; var Ye = function (t) { return new Promise((function (e) { var r = document.createElement("script"); r.src = t, r.addEventListener("load", e), document.head.appendChild(r) })) }, Ve = function () { for (var t = arguments.length, e = new Array(t), r = 0; r < t; r++)e[r] = arguments[r]; return e.length <= 0 ? Promise.resolve() : new Promise((function (t) { var r = setInterval((function () { for (var n = window, o = 0; o < e.length; o++) { var i = n[e[o]]; if (!i) return; n = i } t(), clearInterval(r) }), 100) })) }; function Ze(t) { return Ze = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, Ze(t) } function Ke(t, e) { for (var r = 0; r < e.length; r++) { var n = e[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, Je(n.key), n) } } function Je(t) { var e = function (t, e) { if ("object" != Ze(t) || !t) return t; var r = t[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(t, "string"); if ("object" != Ze(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(t) }(t); return "symbol" == Ze(e) ? e : String(e) } function qe() { return qe = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (t, e, r) { var n = function (t, e) { for (; !Object.prototype.hasOwnProperty.call(t, e) && null !== (t = Qe(t));); return t }(t, e); if (n) { var o = Object.getOwnPropertyDescriptor(n, e); return o.get ? o.get.call(arguments.length < 3 ? t : r) : o.value } }, qe.apply(this, arguments) } function Xe(t, e) { return Xe = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t }, Xe(t, e) } function $e(t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t } function Qe(t) { return Qe = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t) }, Qe(t) } function tr(t, e) { if (e.has(t)) throw new TypeError("Cannot initialize the same private elements twice on an object") } function er(t, e, r) { if (!e.has(t)) throw new TypeError("attempted to get private field on non-instance"); return r } function rr(t, e) { return function (t, e) { return e.get ? e.get.call(t) : e.value }(t, nr(t, e, "get")) } function nr(t, e, r) { if (!e.has(t)) throw new TypeError("attempted to " + r + " private field on non-instance"); return e.get(t) } var or = new WeakMap, ir = new WeakSet; function ar(t, e) { var r = this, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}, o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : "result", i = this._getPromiseDecorator(t); return i || (i = this._createPromiseDecorator(t), this._platformSdk.send(e, n).then((function (e) { e[o] ? r._resolvePromiseDecorator(t) : r._rejectPromiseDecorator(t) })).catch((function (e) { r._rejectPromiseDecorator(t, e) }))), i.promise } const sr = function (e) { !function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && Xe(t, e) }(y, e); var r, n, o, l, p = (o = y, l = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (t) { return !1 } }(), function () { var t, e = Qe(o); if (l) { var r = Qe(this).constructor; t = Reflect.construct(e, arguments, r) } else t = e.apply(this, arguments); return function (t, e) { if (e && ("object" === Ze(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return $e(t) }(this, t) }); function y() { var t, e, r; !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, y); for (var n = arguments.length, o = new Array(n), i = 0; i < n; i++)o[i] = arguments[i]; return tr(e = $e(t = p.call.apply(p, [this].concat(o))), r = ir), r.add(e), function (t, e, r) { tr(t, e), e.set(t, { writable: !0, value: void 0 }) }($e(t), or), t } return r = y, (n = [{ key: "platformId", get: function () { return t.VK } }, { key: "platformLanguage", get: function () { var t = new URL(window.location.href); if (t.searchParams.has("language")) { var e = t.searchParams.get("language"), r = 0; try { r = parseInt(e, 10) } catch (t) { r = 0 } switch (r) { case 0: default: return "ru"; case 1: return "uk"; case 2: return "be"; case 3: return "en" } } return qe(Qe(y.prototype), "platformLanguage", this) } }, { key: "platformPayload", get: function () { var t = new URL(window.location.href); return t.searchParams.has("hash") ? t.searchParams.get("hash") : qe(Qe(y.prototype), "platformPayload", this) } }, { key: "deviceType", get: function () { switch (rr(this, or)) { case "html5_ios": case "html5_android": case "html5_mobile": return c.MOBILE; case "web": return c.DESKTOP; default: return qe(Qe(y.prototype), "deviceType", this) } } }, { key: "isPlayerAuthorizationSupported", get: function () { return !0 } }, { key: "isPlayerAuthorized", get: function () { return !0 } }, { key: "isInviteFriendsSupported", get: function () { return !0 } }, { key: "isJoinCommunitySupported", get: function () { return !0 } }, { key: "isShareSupported", get: function () { return !0 } }, { key: "isCreatePostSupported", get: function () { return !0 } }, { key: "isAddToHomeScreenSupported", get: function () { return "html5_android" === rr(this, or) } }, { key: "isAddToFavoritesSupported", get: function () { return !0 } }, { key: "isLeaderboardSupported", get: function () { return !0 } }, { key: "isLeaderboardNativePopupSupported", get: function () { return this.deviceType === c.MOBILE } }, { key: "initialize", value: function () { var t = this; if (this._isInitialized) return Promise.resolve(); var e, r, n, o = this._getPromiseDecorator(f.INITIALIZE); if (!o) { o = this._createPromiseDecorator(f.INITIALIZE); var i = new URL(window.location.href); i.searchParams.has("platform") && (e = this, r = or, n = i.searchParams.get("platform"), function (t, e, r) { if (e.set) e.set.call(t, r); else { if (!e.writable) throw new TypeError("attempted to set read only private field"); e.value = r } }(e, nr(e, r, "set"), n)), Ye("https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js").then((function () { Ve("vkBridge").then((function () { t._platformSdk = window.vkBridge, t._platformSdk.send("VKWebAppInit").then((function () { t._isBannerSupported = !0, t._platformSdk.send("VKWebAppGetUserInfo").then((function (e) { e && (t._playerId = e.id, t._playerName = "".concat(e.first_name, " ").concat(e.last_name), e.photo_100 && t._playerPhotos.push(e.photo_100), e.photo_200 && t._playerPhotos.push(e.photo_200), e.photo_max_orig && t._playerPhotos.push(e.photo_max_orig)) })).finally((function () { t._isInitialized = !0, t._defaultStorageType = u.PLATFORM_INTERNAL, t._resolvePromiseDecorator(f.INITIALIZE) })) })) })) })) } return o.promise } }, { key: "authorizePlayer", value: function () { return Promise.resolve() } }, { key: "isStorageSupported", value: function (t) { return t === u.PLATFORM_INTERNAL || qe(Qe(y.prototype), "isStorageSupported", this).call(this, t) } }, { key: "isStorageAvailable", value: function (t) { return t === u.PLATFORM_INTERNAL || qe(Qe(y.prototype), "isStorageAvailable", this).call(this, t) } }, { key: "getDataFromStorage", value: function (t, e, r) { var n = this; return e === u.PLATFORM_INTERNAL ? new Promise((function (e, o) { var i = Array.isArray(t) ? t : [t]; n._platformSdk.send("VKWebAppStorageGet", { keys: i }).then((function (n) { if (Array.isArray(t)) { var o = []; return i.forEach((function (t) { var e = n.keys.findIndex((function (e) { return e.key === t })); if (e < 0) o.push(null); else if ("" !== n.keys[e].value) { var i = n.keys[e].value; if (r) try { i = JSON.parse(n.keys[e].value) } catch (t) { } o.push(i) } else o.push(null) })), void e(o) } if ("" !== n.keys[0].value) { var a = n.keys[0].value; if (r) try { a = JSON.parse(n.keys[0].value) } catch (t) { } e(a) } else e(null) })).catch((function (t) { t && t.error_data && t.error_data.error_reason ? o(t.error_data.error_reason) : o() })) })) : qe(Qe(y.prototype), "getDataFromStorage", this).call(this, t, e, r) } }, { key: "setDataToStorage", value: function (t, e, r) { var n = this; if (r === u.PLATFORM_INTERNAL) { if (Array.isArray(t)) { for (var o = [], i = 0; i < t.length; i++) { var a = { key: t[i], value: e[i] }; "string" != typeof e[i] && (a.value = JSON.stringify(e[i])), o.push(this._platformSdk.send("VKWebAppStorageSet", a)) } return Promise.all(o) } var s = { key: t, value: e }; return "string" != typeof e && (s.value = JSON.stringify(e)), new Promise((function (t, e) { n._platformSdk.send("VKWebAppStorageSet", s).then((function () { t() })).catch((function (t) { t && t.error_data && t.error_data.error_reason ? e(t.error_data.error_reason) : e() })) })) } return qe(Qe(y.prototype), "setDataToStorage", this).call(this, t, e, r) } }, { key: "deleteDataFromStorage", value: function (t, e) { if (e === u.PLATFORM_INTERNAL) { if (Array.isArray(t)) { for (var r = [], n = 0; n < t.length; n++)r.push(this.setDataToStorage(t[n], "", e)); return Promise.all(r) } return this.setDataToStorage(t, "", e) } return qe(Qe(y.prototype), "deleteDataFromStorage", this).call(this, t, e) } }, { key: "showBanner", value: function (t) { var e = this, r = "bottom", n = "resize", o = !1; t && ("string" == typeof t.position && (r = t.position), "string" == typeof t.layoutType && (n = t.layoutType), "boolean" == typeof t.canClose && (o = t.canClose)), this._platformSdk.send("VKWebAppShowBannerAd", { banner_location: r, layout_type: n, can_close: o }).then((function (t) { t.result ? e._setBannerState(s.SHOWN) : e._setBannerState(s.FAILED) })).catch((function () { e._setBannerState(s.FAILED) })) } }, { key: "hideBanner", value: function () { var t = this; this._platformSdk.send("VKWebAppHideBannerAd").then((function (e) { e.result && t._setBannerState(s.HIDDEN) })) } }, { key: "showInterstitial", value: function () { var t = this; this._platformSdk.send("VKWebAppCheckNativeAds", { ad_format: "interstitial" }).then((function (e) { e.result && t._setInterstitialState(i.OPENED) })).finally((function () { t._platformSdk.send("VKWebAppShowNativeAds", { ad_format: "interstitial" }).then((function (e) { t._setInterstitialState(e.result ? i.CLOSED : i.FAILED) })).catch((function () { t._setInterstitialState(i.FAILED) })) })) } }, { key: "showRewarded", value: function () { var t = this; this._platformSdk.send("VKWebAppCheckNativeAds", { ad_format: "reward", use_waterfall: !0 }).then((function (e) { e.result && t._setRewardedState(a.OPENED) })).finally((function () { t._platformSdk.send("VKWebAppShowNativeAds", { ad_format: "reward", use_waterfall: !0 }).then((function (e) { e.result ? (t._setRewardedState(a.REWARDED), t._setRewardedState(a.CLOSED)) : t._setRewardedState(a.FAILED) })).catch((function () { t._setRewardedState(a.FAILED) })) })) } }, { key: "inviteFriends", value: function () { return er(this, ir, ar).call(this, f.INVITE_FRIENDS, "VKWebAppShowInviteBox", {}, "success") } }, { key: "joinCommunity", value: function (t) { if (!t || !t.groupId) return Promise.reject(); var e = t.groupId; return "string" == typeof e && (e = parseInt(e, 10), Number.isNaN(e)) ? Promise.reject() : er(this, ir, ar).call(this, f.JOIN_COMMUNITY, "VKWebAppJoinGroup", { group_id: e }).then((function () { window.open("https://vk.com/public".concat(e)) })) } }, { key: "share", value: function (t) { var e = {}; return t && t.link && (e.link = t.link), er(this, ir, ar).call(this, f.SHARE, "VKWebAppShare", e, "type") } }, { key: "createPost", value: function (t) { var e = {}; return t && t.message && (e.message = t.message), t && t.attachments && (e.attachments = t.attachments), er(this, ir, ar).call(this, f.CREATE_POST, "VKWebAppShowWallPostBox", e, "post_id") } }, { key: "addToHomeScreen", value: function () { return this.isAddToHomeScreenSupported ? er(this, ir, ar).call(this, f.ADD_TO_HOME_SCREEN, "VKWebAppAddToHomeScreen") : Promise.reject() } }, { key: "addToFavorites", value: function () { return er(this, ir, ar).call(this, f.ADD_TO_FAVORITES, "VKWebAppAddToFavorites") } }, { key: "showLeaderboardNativePopup", value: function (t) { if (!this.isLeaderboardNativePopupSupported) return Promise.reject(); if (!t || !t.userResult) return Promise.reject(); var e = { user_result: t.userResult }; return "boolean" == typeof t.global && (e.global = t.global ? 1 : 0), er(this, ir, ar).call(this, f.SHOW_LEADERBOARD_NATIVE_POPUP, "VKWebAppShowLeaderBoardBox", e) } }, { key: "clipboardWrite", value: function (t) { return er(this, ir, ar).call(this, f.CLIPBOARD_WRITE, "VKWebAppCopyText", { text: t }) } }]) && Ke(r.prototype, n), Object.defineProperty(r, "prototype", { writable: !1 }), y }(xe); function ur(t) { return ur = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, ur(t) } function cr(t, e) { var r = Object.keys(t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(t); e && (n = n.filter((function (e) { return Object.getOwnPropertyDescriptor(t, e).enumerable }))), r.push.apply(r, n) } return r } function lr(t) { for (var e = 1; e < arguments.length; e++) { var r = null != arguments[e] ? arguments[e] : {}; e % 2 ? cr(Object(r), !0).forEach((function (e) { var n, o, i; n = t, o = e, i = r[e], (o = pr(o)) in n ? Object.defineProperty(n, o, { value: i, enumerable: !0, configurable: !0, writable: !0 }) : n[o] = i })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r)) : cr(Object(r)).forEach((function (e) { Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e)) })) } return t } function fr(t, e) { for (var r = 0; r < e.length; r++) { var n = e[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, pr(n.key), n) } } function pr(t) { var e = function (t, e) { if ("object" != ur(t) || !t) return t; var r = t[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(t, "string"); if ("object" != ur(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(t) }(t); return "symbol" == ur(e) ? e : String(e) } function yr() { return yr = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (t, e, r) { var n = function (t, e) { for (; !Object.prototype.hasOwnProperty.call(t, e) && null !== (t = mr(t));); return t }(t, e); if (n) { var o = Object.getOwnPropertyDescriptor(n, e); return o.get ? o.get.call(arguments.length < 3 ? t : r) : o.value } }, yr.apply(this, arguments) } function dr(t, e) { return dr = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t }, dr(t, e) } function hr(t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t } function mr(t) { return mr = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t) }, mr(t) } function vr(t, e, r) { _r(t, e), e.set(t, r) } function _r(t, e) { if (e.has(t)) throw new TypeError("Cannot initialize the same private elements twice on an object") } function br(t, e, r) { return function (t, e, r) { if (e.set) e.set.call(t, r); else { if (!e.writable) throw new TypeError("attempted to set read only private field"); e.value = r } }(t, wr(t, e, "set"), r), r } function gr(t, e, r) { if (!e.has(t)) throw new TypeError("attempted to get private field on non-instance"); return r } function Sr(t, e) { return function (t, e) { return e.get ? e.get.call(t) : e.value }(t, wr(t, e, "get")) } function wr(t, e, r) { if (!e.has(t)) throw new TypeError("attempted to " + r + " private field on non-instance"); return e.get(t) } var Er = new WeakMap, Pr = new WeakMap, Ar = new WeakMap, Or = new WeakMap, kr = new WeakSet; function Ir(t) { var e = this; return new Promise((function (r) { var n = { scopes: !1 }; t && "boolean" == typeof t.scopes && (n.scopes = t.scopes), e._platformSdk.getPlayer(n).then((function (t) { e._playerId = t.getUniqueID(), e._isPlayerAuthorized = "lite" !== t.getMode(), e._defaultStorageType = e._isPlayerAuthorized ? u.PLATFORM_INTERNAL : u.LOCAL_STORAGE; var r = t.getName(); "" !== r && (e._playerName = r), e._playerPhotos = []; var n = t.getPhoto("small"), o = t.getPhoto("medium"), i = t.getPhoto("large"); n && e._playerPhotos.push(n), o && e._playerPhotos.push(o), i && e._playerPhotos.push(i), br(e, Pr, t) })).finally((function () { r() })) })) } const Tr = function (e) { !function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && dr(t, e) }(d, e); var r, n, o, p, y = (o = d, p = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (t) { return !1 } }(), function () { var t, e = mr(o); if (p) { var r = mr(this).constructor; t = Reflect.construct(e, arguments, r) } else t = e.apply(this, arguments); return function (t, e) { if (e && ("object" === ur(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return hr(t) }(this, t) }); function d() { var t, e, r; !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, d); for (var n = arguments.length, o = new Array(n), i = 0; i < n; i++)o[i] = arguments[i]; return _r(e = hr(t = y.call.apply(y, [this].concat(o))), r = kr), r.add(e), vr(hr(t), Er, { writable: !0, value: !1 }), vr(hr(t), Pr, { writable: !0, value: null }), vr(hr(t), Ar, { writable: !0, value: null }), vr(hr(t), Or, { writable: !0, value: null }), t } return r = d, (n = [{ key: "platformId", get: function () { return t.YANDEX } }, { key: "platformLanguage", get: function () { return this._platformSdk ? this._platformSdk.environment.i18n.lang.toLowerCase() : yr(mr(d.prototype), "platformLanguage", this) } }, { key: "platformTld", get: function () { return this._platformSdk ? this._platformSdk.environment.i18n.tld.toLowerCase() : yr(mr(d.prototype), "platformTld", this) } }, { key: "deviceType", get: function () { switch (this._platformSdk && this._platformSdk.deviceInfo.type) { case c.DESKTOP: return c.DESKTOP; case c.MOBILE: return c.MOBILE; case c.TABLET: return c.TABLET; case c.TV: return c.TV; default: return yr(mr(d.prototype), "deviceType", this) } } }, { key: "isPlayerAuthorizationSupported", get: function () { return !0 } }, { key: "isAddToHomeScreenSupported", get: function () { return Sr(this, Er) } }, { key: "isRateSupported", get: function () { return !0 } }, { key: "isExternalLinksAllowed", get: function () { return !1 } }, { key: "isLeaderboardSupported", get: function () { return !0 } }, { key: "isLeaderboardMultipleBoardsSupported", get: function () { return !0 } }, { key: "isLeaderboardSetScoreSupported", get: function () { return !0 } }, { key: "isLeaderboardGetScoreSupported", get: function () { return !0 } }, { key: "isLeaderboardGetEntriesSupported", get: function () { return !0 } }, { key: "isPaymentsSupported", get: function () { return !0 } }, { key: "isRemoteConfigSupported", get: function () { return !0 } }, { key: "initialize", value: function () { var t = this; if (this._isInitialized) return Promise.resolve(); var e = this._getPromiseDecorator(f.INITIALIZE); return e || (e = this._createPromiseDecorator(f.INITIALIZE), Ye("/sdk.js").then((function () { Ve("YaGames", "init").then((function () { window.YaGames.init().then((function (e) { var r; t._platformSdk = e; var n = gr(t, kr, Ir).call(t), o = null === (r = t._platformSdk.features.PluginEngineDataReporterAPI) || void 0 === r ? void 0 : r.report({ engineName: "", engineVersion: "", pluginName: "playgama-bridge", pluginVersion: "1.16.0" }), i = t._platformSdk.shortcut.canShowPrompt().then((function (e) { br(t, Er, e.canShow) })), a = new Promise((function (t) { setTimeout(t, 1e3) })), u = Promise.race([i, a]), c = t._platformSdk.getLeaderboards().then((function (e) { br(t, Ar, e) })), l = t._platformSdk.getPayments().then((function (e) { br(t, Or, e) })); t._isBannerSupported = !0; var p = t._platformSdk.adv.getBannerAdvStatus().then((function (e) { e.stickyAdvIsShowing && t._setBannerState(s.SHOWN) })); Promise.all([n, o, u, c, l, p]).finally((function () { t._isInitialized = !0, t._resolvePromiseDecorator(f.INITIALIZE) })) })) })) }))), e.promise } }, { key: "sendMessage", value: function (t) { switch (t) { case l.GAME_READY: var e; return null === (e = this._platformSdk.features.LoadingAPI) || void 0 === e || e.ready(), Promise.resolve(); case l.GAMEPLAY_STARTED: var r; return null === (r = this._platformSdk.features.GameplayAPI) || void 0 === r || r.start(), Promise.resolve(); case l.GAMEPLAY_STOPPED: var n; return null === (n = this._platformSdk.features.GameplayAPI) || void 0 === n || n.stop(), Promise.resolve(); default: return yr(mr(d.prototype), "sendMessage", this).call(this, t) } } }, { key: "getServerTime", value: function () { var t = this; return new Promise((function (e) { e(t._platformSdk.serverTime()) })) } }, { key: "authorizePlayer", value: function (t) { var e = this, r = this._getPromiseDecorator(f.AUTHORIZE_PLAYER); return r || (r = this._createPromiseDecorator(f.AUTHORIZE_PLAYER), this._isPlayerAuthorized ? gr(this, kr, Ir).call(this, t).then((function () { e._resolvePromiseDecorator(f.AUTHORIZE_PLAYER) })) : this._platformSdk.auth.openAuthDialog().then((function () { gr(e, kr, Ir).call(e, t).then((function () { e._resolvePromiseDecorator(f.AUTHORIZE_PLAYER) })) })).catch((function (t) { e._rejectPromiseDecorator(f.AUTHORIZE_PLAYER, t) }))), r.promise } }, { key: "isStorageSupported", value: function (t) { return t === u.PLATFORM_INTERNAL || yr(mr(d.prototype), "isStorageSupported", this).call(this, t) } }, { key: "isStorageAvailable", value: function (t) { return t === u.PLATFORM_INTERNAL ? this._isPlayerAuthorized : yr(mr(d.prototype), "isStorageAvailable", this).call(this, t) } }, { key: "getDataFromStorage", value: function (t, e, r) { var n = this; return e === u.PLATFORM_INTERNAL ? this._isPlayerAuthorized ? new Promise((function (e, r) { if (n._platformStorageCachedData) { if (Array.isArray(t)) { for (var o = [], i = 0; i < t.length; i++) { var a = void 0 === n._platformStorageCachedData[t[i]] ? null : n._platformStorageCachedData[t[i]]; o.push(a) } return void e(o) } e(void 0 === n._platformStorageCachedData[t] ? null : n._platformStorageCachedData[t]) } else Sr(n, Pr) ? Sr(n, Pr).getData().then((function (r) { if (n._platformStorageCachedData = r, Array.isArray(t)) { for (var o = [], i = 0; i < t.length; i++) { var a = void 0 === n._platformStorageCachedData[t[i]] ? null : n._platformStorageCachedData[t[i]]; o.push(a) } e(o) } else e(void 0 === n._platformStorageCachedData[t] ? null : n._platformStorageCachedData[t]) })).catch((function (t) { r(t) })) : r() })) : Promise.reject() : yr(mr(d.prototype), "getDataFromStorage", this).call(this, t, e, r) } }, { key: "setDataToStorage", value: function (t, e, r) { var n = this; return r === u.PLATFORM_INTERNAL ? new Promise((function (r, o) { if (Sr(n, Pr)) { var i = null !== n._platformStorageCachedData ? lr({}, n._platformStorageCachedData) : {}; if (Array.isArray(t)) for (var a = 0; a < t.length; a++)i[t[a]] = e[a]; else i[t] = e; Sr(n, Pr).setData(i).then((function () { n._platformStorageCachedData = i, r() })).catch((function (t) { o(t) })) } else o() })) : yr(mr(d.prototype), "setDataToStorage", this).call(this, t, e, r) } }, { key: "deleteDataFromStorage", value: function (t, e) { var r = this; return e === u.PLATFORM_INTERNAL ? new Promise((function (e, n) { if (Sr(r, Pr)) { var o = null !== r._platformStorageCachedData ? lr({}, r._platformStorageCachedData) : {}; if (Array.isArray(t)) for (var i = 0; i < t.length; i++)delete o[t[i]]; else delete o[t]; Sr(r, Pr).setData(o).then((function () { r._platformStorageCachedData = o, e() })).catch((function (t) { n(t) })) } else n() })) : yr(mr(d.prototype), "deleteDataFromStorage", this).call(this, t, e) } }, { key: "showBanner", value: function () { var t = this; this._platformSdk.adv.showBannerAdv().then((function (e) { e.stickyAdvIsShowing ? t._setBannerState(s.SHOWN) : t._setBannerState(s.FAILED) })).catch((function () { t._setBannerState(s.FAILED) })) } }, { key: "hideBanner", value: function () { var t = this; this._platformSdk.adv.hideBannerAdv().then((function (e) { e.stickyAdvIsShowing || t._setBannerState(s.HIDDEN) })) } }, { key: "showInterstitial", value: function () { var t = this; this._platformSdk.adv.showFullscreenAdv({ callbacks: { onOpen: function () { t._setInterstitialState(i.OPENED) }, onClose: function (e) { e ? t._setInterstitialState(i.CLOSED) : t._setInterstitialState(i.FAILED) }, onError: function (t) { console.error(t) } } }) } }, { key: "showRewarded", value: function () { var t = this; this._platformSdk.adv.showRewardedVideo({ callbacks: { onOpen: function () { t._setRewardedState(a.OPENED) }, onRewarded: function () { t._setRewardedState(a.REWARDED) }, onClose: function () { t._setRewardedState(a.CLOSED) }, onError: function () { t._setRewardedState(a.FAILED) } } }) } }, { key: "checkAdBlock", value: function () { return new Promise((function (t) { t(!1) })) } }, { key: "addToHomeScreen", value: function () { var t = this; if (!this.isAddToHomeScreenSupported) return Promise.reject(); var e = this._getPromiseDecorator(f.ADD_TO_HOME_SCREEN); return e || (e = this._createPromiseDecorator(f.ADD_TO_HOME_SCREEN), this._platformSdk.shortcut.showPrompt().then((function (e) { "accepted" !== e.outcome ? t._rejectPromiseDecorator(f.ADD_TO_HOME_SCREEN) : t._resolvePromiseDecorator(f.ADD_TO_HOME_SCREEN) })).catch((function (e) { t._rejectPromiseDecorator(f.ADD_TO_HOME_SCREEN, e) }))), e.promise } }, { key: "rate", value: function () { var t = this, e = this._getPromiseDecorator(f.RATE); return e || (e = this._createPromiseDecorator(f.RATE), this._platformSdk.feedback.canReview().then((function (e) { e.value ? t._platformSdk.feedback.requestReview().then((function (e) { e.feedbackSent ? t._resolvePromiseDecorator(f.RATE) : t._rejectPromiseDecorator(f.RATE) })).catch((function (e) { t._rejectPromiseDecorator(f.RATE, e) })) : t._rejectPromiseDecorator(f.RATE, e.reason) })).catch((function (e) { t._rejectPromiseDecorator(f.RATE, e) }))), e.promise } }, { key: "setLeaderboardScore", value: function (t) { var e = this; if (!this._isPlayerAuthorized) return Promise.reject(); if (!(Sr(this, Ar) && t && t.score && t.leaderboardName)) return Promise.reject(); var r = this._getPromiseDecorator(f.SET_LEADERBOARD_SCORE); return r || (r = this._createPromiseDecorator(f.SET_LEADERBOARD_SCORE), "string" == typeof t.score && (t.score = parseInt(t.score, 10)), Sr(this, Ar).setLeaderboardScore(t.leaderboardName, t.score).then((function () { e._resolvePromiseDecorator(f.SET_LEADERBOARD_SCORE) })).catch((function (t) { e._rejectPromiseDecorator(f.SET_LEADERBOARD_SCORE, t) }))), r.promise } }, { key: "getLeaderboardScore", value: function (t) { var e = this; if (!this._isPlayerAuthorized) return Promise.reject(); if (!Sr(this, Ar) || !t || !t.leaderboardName) return Promise.reject(); var r = this._getPromiseDecorator(f.GET_LEADERBOARD_SCORE); return r || (r = this._createPromiseDecorator(f.GET_LEADERBOARD_SCORE), Sr(this, Ar).getLeaderboardPlayerEntry(t.leaderboardName).then((function (t) { e._resolvePromiseDecorator(f.GET_LEADERBOARD_SCORE, t.score) })).catch((function (t) { e._rejectPromiseDecorator(f.GET_LEADERBOARD_SCORE, t) }))), r.promise } }, { key: "getLeaderboardEntries", value: function (t) { var e = this; if (!Sr(this, Ar) || !t || !t.leaderboardName) return Promise.reject(); var r = this._getPromiseDecorator(f.GET_LEADERBOARD_ENTRIES); if (!r) { r = this._createPromiseDecorator(f.GET_LEADERBOARD_ENTRIES); var n = { includeUser: !1, quantityAround: 5, quantityTop: 5 }; "boolean" == typeof t.includeUser && (n.includeUser = t.includeUser), "string" == typeof t.quantityAround && (t.quantityAround = parseInt(t.quantityAround, 10)), "number" == typeof t.quantityAround && (n.quantityAround = t.quantityAround), "string" == typeof t.quantityTop && (t.quantityTop = parseInt(t.quantityTop, 10)), "number" == typeof t.quantityTop && (n.quantityTop = t.quantityTop), Sr(this, Ar).getLeaderboardEntries(t.leaderboardName, n).then((function (t) { var r = null; t && t.entries.length > 0 && (r = t.entries.map((function (t) { return { id: t.player.uniqueID, score: t.score, rank: t.rank, name: t.player.publicName, photo: t.player.getAvatarSrc("large") } }))), e._resolvePromiseDecorator(f.GET_LEADERBOARD_ENTRIES, r) })).catch((function (t) { e._rejectPromiseDecorator(f.GET_LEADERBOARD_ENTRIES, t) })) } return r.promise } }, { key: "purchase", value: function (t) { var e = this; if (!Sr(this, Or) || !t.id) return Promise.reject(); var r = this._getPromiseDecorator(f.PURCHASE); return r || (r = this._createPromiseDecorator(f.PURCHASE), Sr(this, Or).purchase(t).then((function (t) { e._resolvePromiseDecorator(f.PURCHASE, t) })).catch((function (t) { e._rejectPromiseDecorator(f.PURCHASE, t) }))), r.promise } }, { key: "getPaymentsPurchases", value: function () { var t = this; if (!Sr(this, Or)) return Promise.reject(); var e = this._getPromiseDecorator(f.GET_PURCHASES); return e || (e = this._createPromiseDecorator(f.GET_PURCHASES), Sr(this, Or).getPurchases().then((function (e) { var r = e.map((function (t) { return { developerPayload: t.developerPayload, productID: t.productID, purchaseToken: t.purchaseToken } })); t._resolvePromiseDecorator(f.GET_PURCHASES, r) })).catch((function (e) { t._rejectPromiseDecorator(f.GET_PURCHASES, e) }))), e.promise } }, { key: "getPaymentsCatalog", value: function () { var t = this; if (!Sr(this, Or)) return Promise.reject(); var e = this._getPromiseDecorator(f.GET_CATALOG); return e || (e = this._createPromiseDecorator(f.GET_CATALOG), Sr(this, Or).getCatalog().then((function (e) { var r = e.map((function (t) { return { id: t.id, description: t.description, imageURI: t.imageURI, price: t.price, priceCurrencyCode: t.priceCurrencyCode, priceValue: t.priceValue, priceCurrencyImage: t.getPriceCurrencyImage("medium"), title: t.title } })); t._resolvePromiseDecorator(f.GET_CATALOG, r) })).catch((function (e) { t._rejectPromiseDecorator(f.GET_CATALOG, e) }))), e.promise } }, { key: "consumePurchase", value: function (t) { var e = this; if (!Sr(this, Or) || !t.purchaseToken) return Promise.reject(); var r = this._getPromiseDecorator(f.CONSUME_PURCHASE); return r || (r = this._createPromiseDecorator(f.CONSUME_PURCHASE), Sr(this, Or).consumePurchase(t.purchaseToken).then((function (t) { e._resolvePromiseDecorator(f.CONSUME_PURCHASE, t) })).catch((function (t) { e._rejectPromiseDecorator(f.CONSUME_PURCHASE, t) }))), r.promise } }, { key: "getRemoteConfig", value: function (t) { var e = this; if (!this._platformSdk) return Promise.reject(); var r = t; r || (r = {}), r.clientFeatures || (r.clientFeatures = []); var n = this._getPromiseDecorator(f.GET_REMOTE_CONFIG); return n || (n = this._createPromiseDecorator(f.GET_REMOTE_CONFIG), this._platformSdk.getFlags(r).then((function (t) { e._resolvePromiseDecorator(f.GET_REMOTE_CONFIG, t) })).catch((function (t) { e._rejectPromiseDecorator(f.GET_REMOTE_CONFIG, t) }))), n.promise } }, { key: "clipboardWrite", value: function (t) { var e = this, r = this._getPromiseDecorator(f.CLIPBOARD_WRITE); return r || (r = this._createPromiseDecorator(f.CLIPBOARD_WRITE), this._platformSdk.clipboard.writeText(t).then((function () { e._resolvePromiseDecorator(f.CLIPBOARD_WRITE, !0) })).catch((function (t) { e._rejectPromiseDecorator(f.CLIPBOARD_WRITE, t) }))), r.promise } }]) && fr(r.prototype, n), Object.defineProperty(r, "prototype", { writable: !1 }), d }(xe); class Dr extends Error { } function Rr(t) { return Rr = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, Rr(t) } function Lr(t, e) { for (var r = 0; r < e.length; r++) { var n = e[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, jr(n.key), n) } } function jr(t) { var e = function (t, e) { if ("object" != Rr(t) || !t) return t; var r = t[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(t, "string"); if ("object" != Rr(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(t) }(t); return "symbol" == Rr(e) ? e : String(e) } function Nr() { return Nr = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (t, e, r) { var n = function (t, e) { for (; !Object.prototype.hasOwnProperty.call(t, e) && null !== (t = Mr(t));); return t }(t, e); if (n) { var o = Object.getOwnPropertyDescriptor(n, e); return o.get ? o.get.call(arguments.length < 3 ? t : r) : o.value } }, Nr.apply(this, arguments) } function Cr(t, e) { return Cr = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t }, Cr(t, e) } function Br(t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t } function Mr(t) { return Mr = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t) }, Mr(t) } function Fr(t, e, r) { Gr(t, e), e.set(t, r) } function Gr(t, e) { if (e.has(t)) throw new TypeError("Cannot initialize the same private elements twice on an object") } function Wr(t, e, r) { if (!e.has(t)) throw new TypeError("attempted to get private field on non-instance"); return r } function zr(t, e, r) { return function (t, e, r) { if (e.set) e.set.call(t, r); else { if (!e.writable) throw new TypeError("attempted to set read only private field"); e.value = r } }(t, Hr(t, e, "set"), r), r } function Ur(t, e) { return function (t, e) { return e.get ? e.get.call(t) : e.value }(t, Hr(t, e, "get")) } function Hr(t, e, r) { if (!e.has(t)) throw new TypeError("attempted to " + r + " private field on non-instance"); return e.get(t) } Dr.prototype.name = "InvalidTokenError"; var xr = new WeakMap, Yr = new WeakMap, Vr = new WeakMap, Zr = new WeakSet; function Kr() { var t = this; return Ur(this, Yr) ? new Promise((function (e, r) { t._platformSdk.user.getUserToken().then((function (r) { var n = function (t, e) { if ("string" != typeof t) throw new Dr("Invalid token specified: must be a string"); e || (e = {}); const r = !0 === e.header ? 0 : 1, n = t.split(".")[r]; if ("string" != typeof n) throw new Dr(`Invalid token specified: missing part #${r + 1}`); let o; try { o = function (t) { let e = t.replace(/-/g, "+").replace(/_/g, "/"); switch (e.length % 4) { case 0: break; case 2: e += "=="; break; case 3: e += "="; break; default: throw new Error("base64 string is not of the correct length") }try { return function (t) { return decodeURIComponent(atob(t).replace(/(.)/g, ((t, e) => { let r = e.charCodeAt(0).toString(16).toUpperCase(); return r.length < 2 && (r = "0" + r), "%" + r }))) }(e) } catch (t) { return atob(e) } }(n) } catch (t) { throw new Dr(`Invalid token specified: invalid base64 for part #${r + 1} (${t.message})`) } try { return JSON.parse(o) } catch (t) { throw new Dr(`Invalid token specified: invalid json for part #${r + 1} (${t.message})`) } }(r); t._isPlayerAuthorized = !0, t._defaultStorageType = u.PLATFORM_INTERNAL, n.userId && (t._playerId = n.userId), n.username && (t._playerName = n.username), n.profilePictureUrl && (t._playerPhotos = [n.profilePictureUrl]), e() })).catch((function (t) { r(t) })) })) : Promise.reject() } const Jr = function (e) { !function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && Cr(t, e) }(d, e); var r, n, o, p, y = (o = d, p = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (t) { return !1 } }(), function () { var t, e = Mr(o); if (p) { var r = Mr(this).constructor; t = Reflect.construct(e, arguments, r) } else t = e.apply(this, arguments); return function (t, e) { if (e && ("object" === Rr(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return Br(t) }(this, t) }); function d() { var t, e, r; !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, d); for (var n = arguments.length, o = new Array(n), s = 0; s < n; s++)o[s] = arguments[s]; return Gr(e = Br(t = y.call.apply(y, [this].concat(o))), r = Zr), r.add(e), Fr(Br(t), xr, { writable: !0, value: !1 }), Fr(Br(t), Yr, { writable: !0, value: !1 }), Fr(Br(t), Vr, { writable: !0, value: { adStarted: function () { Ur(Br(t), xr) ? t._setRewardedState(a.OPENED) : t._setInterstitialState(i.OPENED) }, adFinished: function () { Ur(Br(t), xr) ? (t._setRewardedState(a.REWARDED), t._setRewardedState(a.CLOSED)) : t._setInterstitialState(i.CLOSED) }, adError: function () { Ur(Br(t), xr) ? t._setRewardedState(a.FAILED) : t._setInterstitialState(i.FAILED) } } }), t } return r = d, (n = [{ key: "platformId", get: function () { return t.CRAZY_GAMES } }, { key: "platformLanguage", get: function () { return Ur(this, Yr) ? this._platformSdk.user.systemInfo.countryCode.toLowerCase() : Nr(Mr(d.prototype), "platformLanguage", this) } }, { key: "isPlayerAuthorizationSupported", get: function () { return Ur(this, Yr) } }, { key: "deviceType", get: function () { if (Ur(this, Yr)) { var t = this._platformSdk.user.systemInfo.device.type.toLowerCase(); if ([c.DESKTOP, c.MOBILE, c.TABLET].includes(t)) return t } return Nr(Mr(d.prototype), "deviceType", this) } }, { key: "initialize", value: function () { var t = this; if (this._isInitialized) return Promise.resolve(); var e = this._getPromiseDecorator(f.INITIALIZE); return e || (e = this._createPromiseDecorator(f.INITIALIZE), Ye("https://sdk.crazygames.com/crazygames-sdk-v3.js").then((function () { Ve("CrazyGames", "SDK", "init").then((function () { t._platformSdk = window.CrazyGames.SDK, t._defaultStorageType = u.LOCAL_STORAGE, t._isBannerSupported = !0, t._platformSdk.init().then((function () { zr(t, Yr, t._platformSdk.user.isUserAccountAvailable); var e = Wr(t, Zr, Kr).call(t); Promise.all([e]).finally((function () { t._isInitialized = !0, t._resolvePromiseDecorator(f.INITIALIZE) })) })) })) }))), e.promise } }, { key: "authorizePlayer", value: function () { var t = this; if (!Ur(this, Yr)) return Promise.reject(); if (this._isPlayerAuthorized) return Promise.resolve(); var e = this._getPromiseDecorator(f.AUTHORIZE_PLAYER); return e || (e = this._createPromiseDecorator(f.AUTHORIZE_PLAYER), this._platformSdk.user.showAuthPrompt().then((function () { Wr(t, Zr, Kr).call(t).then((function () { t._resolvePromiseDecorator(f.AUTHORIZE_PLAYER) })) })).catch((function (e) { t._rejectPromiseDecorator(f.AUTHORIZE_PLAYER, e) }))), e.promise } }, { key: "sendMessage", value: function (t) { switch (t) { case l.IN_GAME_LOADING_STARTED: return this._platformSdk.game.loadingStart(), Promise.resolve(); case l.IN_GAME_LOADING_STOPPED: return this._platformSdk.game.loadingStop(), Promise.resolve(); case l.GAMEPLAY_STARTED: return this._platformSdk.game.gameplayStart(), Promise.resolve(); case l.GAMEPLAY_STOPPED: return this._platformSdk.game.gameplayStop(), Promise.resolve(); case l.PLAYER_GOT_ACHIEVEMENT: return this._platformSdk.game.happytime(), Promise.resolve(); default: return Nr(Mr(d.prototype), "sendMessage", this).call(this, t) } } }, { key: "isStorageSupported", value: function (t) { return t === u.PLATFORM_INTERNAL || Nr(Mr(d.prototype), "isStorageSupported", this).call(this, t) } }, { key: "isStorageAvailable", value: function (t) { return t === u.PLATFORM_INTERNAL || Nr(Mr(d.prototype), "isStorageAvailable", this).call(this, t) } }, { key: "getDataFromStorage", value: function (t, e, r) { var n = this; return e === u.PLATFORM_INTERNAL ? new Promise((function (e) { if (Array.isArray(t)) { var o = []; return t.forEach((function (t) { var e = n._platformSdk.data.getItem(t); if (r) try { e = JSON.parse(e) } catch (t) { } o.push(e) })), void e(o) } var i = n._platformSdk.data.getItem(t); if (r) try { i = JSON.parse(i) } catch (t) { } e(i) })) : Nr(Mr(d.prototype), "getDataFromStorage", this).call(this, t, e, r) } }, { key: "setDataToStorage", value: function (t, e, r) { var n = this; return r === u.PLATFORM_INTERNAL ? new Promise((function (r) { if (Array.isArray(t)) { for (var o = 0; o < t.length; o++) { var i = e[o]; "string" != typeof e[o] && (i = JSON.stringify(e[o])), n._platformSdk.data.setItem(t[o], i) } r() } else { var a = e; "string" != typeof e && (a = JSON.stringify(e)), n._platformSdk.data.setItem(t, a), r() } })) : Nr(Mr(d.prototype), "setDataToStorage", this).call(this, t, e, r) } }, { key: "deleteDataFromStorage", value: function (t, e) { var r = this; return e === u.PLATFORM_INTERNAL ? Array.isArray(t) ? (t.forEach((function (t) { return r._platformSdk.data.removeItem(t) })), Promise.resolve()) : (this._platformSdk.data.removeItem(t), Promise.resolve()) : Nr(Mr(d.prototype), "deleteDataFromStorage", this).call(this, t, e) } }, { key: "showBanner", value: function (t) { var e = this; t && t.containerId && "string" == typeof t.containerId ? this._platformSdk.banner.requestResponsiveBanner([t.containerId]).then((function () { e._setBannerState(s.SHOWN) })).catch((function () { e._setBannerState(s.FAILED) })) : this._setBannerState(s.FAILED) } }, { key: "hideBanner", value: function () { this._platformSdk.banner.clearAllBanners(), this._setBannerState(s.HIDDEN) } }, { key: "showInterstitial", value: function () { zr(this, xr, !1), this._platformSdk.ad.requestAd("midgame", Ur(this, Vr)) } }, { key: "showRewarded", value: function () { zr(this, xr, !0), this._platformSdk.ad.requestAd("rewarded", Ur(this, Vr)) } }, { key: "checkAdBlock", value: function () { var t = this; return new Promise((function (e) { t._platformSdk.ad.hasAdblock().then((function (t) { e(t) })) })) } }]) && Lr(r.prototype, n), Object.defineProperty(r, "prototype", { writable: !1 }), d }(xe); function qr(t) { return qr = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, qr(t) } function Xr(t, e) { var r = Object.keys(t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(t); e && (n = n.filter((function (e) { return Object.getOwnPropertyDescriptor(t, e).enumerable }))), r.push.apply(r, n) } return r } function $r(t) { for (var e = 1; e < arguments.length; e++) { var r = null != arguments[e] ? arguments[e] : {}; e % 2 ? Xr(Object(r), !0).forEach((function (e) { var n, o, i; n = t, o = e, i = r[e], (o = tn(o)) in n ? Object.defineProperty(n, o, { value: i, enumerable: !0, configurable: !0, writable: !0 }) : n[o] = i })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r)) : Xr(Object(r)).forEach((function (e) { Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e)) })) } return t } function Qr(t, e) { for (var r = 0; r < e.length; r++) { var n = e[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, tn(n.key), n) } } function tn(t) { var e = function (t, e) { if ("object" != qr(t) || !t) return t; var r = t[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(t, "string"); if ("object" != qr(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(t) }(t); return "symbol" == qr(e) ? e : String(e) } function en() { return en = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (t, e, r) { var n = function (t, e) { for (; !Object.prototype.hasOwnProperty.call(t, e) && null !== (t = on(t));); return t }(t, e); if (n) { var o = Object.getOwnPropertyDescriptor(n, e); return o.get ? o.get.call(arguments.length < 3 ? t : r) : o.value } }, en.apply(this, arguments) } function rn(t, e) { return rn = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t }, rn(t, e) } function nn(t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t } function on(t) { return on = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t) }, on(t) } var an = new WeakSet; function sn() { var t = this; return this._playerId = this._platformSdk.options.player_id, this._isPlayerAuthorized = "false" === this._platformSdk.options.guest, new Promise((function (e) { t._platformSdk.getUsers([t._playerId], (function (r) { if (r && 1 === r.length) { var n = r[0]; t._playerName = n.full_name, "" !== n.avatar && (t._playerPhotos = [n.avatar]) } e() })) })) } const un = function (e) { !function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && rn(t, e) }(l, e); var r, n, o, s, c = (o = l, s = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (t) { return !1 } }(), function () { var t, e = on(o); if (s) { var r = on(this).constructor; t = Reflect.construct(e, arguments, r) } else t = e.apply(this, arguments); return function (t, e) { if (e && ("object" === qr(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return nn(t) }(this, t) }); function l() { var t, e, r; !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, l); for (var n = arguments.length, o = new Array(n), i = 0; i < n; i++)o[i] = arguments[i]; return function (t, e) { if (e.has(t)) throw new TypeError("Cannot initialize the same private elements twice on an object") }(e = nn(t = c.call.apply(c, [this].concat(o))), r = an), r.add(e), t } return r = l, (n = [{ key: "platformId", get: function () { return t.ABSOLUTE_GAMES } }, { key: "isPlayerAuthorizationSupported", get: function () { return !0 } }, { key: "isExternalLinksAllowed", get: function () { return !1 } }, { key: "initialize", value: function () { var t = this; if (this._isInitialized) return Promise.resolve(); var e = this._getPromiseDecorator(f.INITIALIZE); return e || (e = this._createPromiseDecorator(f.INITIALIZE), Ye("https://unpkg.com/@agru/sdk/dist/umd/index.min.js").then((function () { t._platformSdk = new window.AgRuSdk, t._platformSdk.on(window.AgRuSdkMethods.ShowCampaign, (function (e, r) { "rewarded" === e.type ? null === r ? e.status ? t._setRewardedState(a.OPENED) : (e.reward && t._setRewardedState(a.REWARDED), t._setRewardedState(a.CLOSED)) : t._setRewardedState(a.FAILED) : null === r ? e.status ? t._setInterstitialState(i.OPENED) : t._setInterstitialState(i.CLOSED) : t._setInterstitialState(i.FAILED) })); var e = function (t, e, r) { if (!e.has(t)) throw new TypeError("attempted to get private field on non-instance"); return r }(t, an, sn).call(t); Promise.all([e]).finally((function () { t._isInitialized = !0, t._defaultStorageType = t._isPlayerAuthorized ? u.PLATFORM_INTERNAL : u.LOCAL_STORAGE, t._resolvePromiseDecorator(f.INITIALIZE) })) }))), e.promise } }, { key: "authorizePlayer", value: function () { var t = this; if (this._isPlayerAuthorized) return Promise.resolve(); var e = this._getPromiseDecorator(f.AUTHORIZE_PLAYER); return e || (e = this._createPromiseDecorator(f.AUTHORIZE_PLAYER), this._platformSdk.authorize((function (e, r) { null === r ? t._resolvePromiseDecorator(f.AUTHORIZE_PLAYER) : t._rejectPromiseDecorator(f.AUTHORIZE_PLAYER, r) }))), e.promise } }, { key: "isStorageSupported", value: function (t) { return t === u.PLATFORM_INTERNAL || en(on(l.prototype), "isStorageSupported", this).call(this, t) } }, { key: "isStorageAvailable", value: function (t) { return t === u.PLATFORM_INTERNAL ? this._isPlayerAuthorized : en(on(l.prototype), "isStorageAvailable", this).call(this, t) } }, { key: "getDataFromStorage", value: function (t, e, r) { var n = this; return e === u.PLATFORM_INTERNAL ? new Promise((function (e, r) { if (n._platformStorageCachedData) { if (Array.isArray(t)) { for (var o = [], i = 0; i < t.length; i++) { var a = void 0 === n._platformStorageCachedData[t[i]] ? null : n._platformStorageCachedData[t[i]]; o.push(a) } return void e(o) } e(void 0 === n._platformStorageCachedData[t] ? null : n._platformStorageCachedData[t]) } else n._isPlayerAuthorized ? n._platformSdk.getSaveData((function (o, i) { if (null === i) { if (n._platformStorageCachedData = o || {}, Array.isArray(t)) { for (var a = [], s = 0; s < t.length; s++) { var u = void 0 === n._platformStorageCachedData[t[s]] ? null : n._platformStorageCachedData[t[s]]; a.push(u) } return void e(a) } e(void 0 === n._platformStorageCachedData[t] ? null : n._platformStorageCachedData[t]) } else r(i) })) : r() })) : en(on(l.prototype), "getDataFromStorage", this).call(this, t, e, r) } }, { key: "setDataToStorage", value: function (t, e, r) { var n = this; return r === u.PLATFORM_INTERNAL ? new Promise((function (r, o) { if (n._isPlayerAuthorized) { var i = null !== n._platformStorageCachedData ? $r({}, n._platformStorageCachedData) : {}; if (Array.isArray(t)) for (var a = 0; a < t.length; a++)i[t[a]] = e[a]; else i[t] = e; n._platformSdk.setSaveData(i, (function (t, e) { null === e && (n._platformStorageCachedData = i, r()), o(e) })) } else o() })) : en(on(l.prototype), "setDataToStorage", this).call(this, t, e, r) } }, { key: "deleteDataFromStorage", value: function (t, e) { var r = this; return e === u.PLATFORM_INTERNAL ? new Promise((function (e, n) { if (r._isPlayerAuthorized) { var o = null !== r._platformStorageCachedData ? $r({}, r._platformStorageCachedData) : {}; if (Array.isArray(t)) for (var i = 0; i < t.length; i++)delete o[t[i]]; else delete o[t]; r._platformSdk.setSaveData(o, (function (t, i) { null === i && (r._platformStorageCachedData = o, e()), n(i) })) } else n() })) : en(on(l.prototype), "deleteDataFromStorage", this).call(this, t, e) } }, { key: "showInterstitial", value: function () { this._platformSdk.showCampaign("default") } }, { key: "showRewarded", value: function () { this._platformSdk.showCampaign("rewarded") } }]) && Qr(r.prototype, n), Object.defineProperty(r, "prototype", { writable: !1 }), l }(xe); function cn(t) { return cn = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, cn(t) } function ln(t, e) { for (var r = 0; r < e.length; r++) { var n = e[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, fn(n.key), n) } } function fn(t) { var e = function (t, e) { if ("object" != cn(t) || !t) return t; var r = t[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(t, "string"); if ("object" != cn(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(t) }(t); return "symbol" == cn(e) ? e : String(e) } function pn(t, e) { return pn = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t }, pn(t, e) } function yn(t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t } function dn(t) { return dn = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t) }, dn(t) } function hn(t, e, r) { return function (t, e, r) { if (e.set) e.set.call(t, r); else { if (!e.writable) throw new TypeError("attempted to set read only private field"); e.value = r } }(t, vn(t, e, "set"), r), r } function mn(t, e) { return function (t, e) { return e.get ? e.get.call(t) : e.value }(t, vn(t, e, "get")) } function vn(t, e, r) { if (!e.has(t)) throw new TypeError("attempted to " + r + " private field on non-instance"); return e.get(t) } var _n = new WeakMap; const bn = function (e) { !function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && pn(t, e) }(p, e); var r, n, o, c, l = (o = p, c = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (t) { return !1 } }(), function () { var t, e = dn(o); if (c) { var r = dn(this).constructor; t = Reflect.construct(e, arguments, r) } else t = e.apply(this, arguments); return function (t, e) { if (e && ("object" === cn(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return yn(t) }(this, t) }); function p() { var t, e, r, n; !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, p); for (var o = arguments.length, i = new Array(o), a = 0; a < o; a++)i[a] = arguments[a]; return e = yn(t = l.call.apply(l, [this].concat(i))), n = { writable: !0, value: !1 }, function (t, e) { if (e.has(t)) throw new TypeError("Cannot initialize the same private elements twice on an object") }(e, r = _n), r.set(e, n), t } return r = p, (n = [{ key: "platformId", get: function () { return t.GAME_DISTRIBUTION } }, { key: "isExternalLinksAllowed", get: function () { return !1 } }, { key: "initialize", value: function () { if (this._isInitialized) return Promise.resolve(); var t = this._getPromiseDecorator(f.INITIALIZE); if (!t) if (t = this._createPromiseDecorator(f.INITIALIZE), this._options && "string" == typeof this._options.gameId) { var e = this; window.GD_OPTIONS = { gameId: this._options.gameId, onEvent: function (t) { switch (t.name) { case "SDK_READY": e._platformSdk = window.gdsdk, e._platformSdk.preloadAd("rewarded"), e._isInitialized = !0, e._resolvePromiseDecorator(f.INITIALIZE); break; case "SDK_GAME_START": mn(e, _n) ? e._setRewardedState(a.CLOSED) : e._setInterstitialState(i.CLOSED); break; case "SDK_GAME_PAUSE": mn(e, _n) ? e._setRewardedState(a.OPENED) : e._setInterstitialState(i.OPENED); break; case "SDK_REWARDED_WATCH_COMPLETE": e._setRewardedState(a.REWARDED) } } }, this._defaultStorageType = u.LOCAL_STORAGE, this._isBannerSupported = !0, Ye("https://html5.api.gamedistribution.com/main.min.js") } else this._rejectPromiseDecorator(f.INITIALIZE, h); return t.promise } }, { key: "showBanner", value: function (t) { var e = this; t && t.containerId && "string" == typeof t.containerId ? this._platformSdk.showAd("display", { containerId: t.containerId }).then((function () { e._setBannerState(s.SHOWN) })).catch((function () { e._setBannerState(s.FAILED) })) : this._setBannerState(s.FAILED) } }, { key: "hideBanner", value: function () { this._setBannerState(s.HIDDEN) } }, { key: "showInterstitial", value: function () { var t = this; hn(this, _n, !1), this._platformSdk ? this._platformSdk.showAd().catch((function () { t._setInterstitialState(i.FAILED) })) : this._setInterstitialState(i.FAILED) } }, { key: "showRewarded", value: function () { var t = this; hn(this, _n, !0), this._platformSdk ? this._platformSdk.showAd("rewarded").catch((function () { t._setRewardedState(a.FAILED) })) : this._setRewardedState(a.FAILED) } }]) && ln(r.prototype, n), Object.defineProperty(r, "prototype", { writable: !1 }), p }(xe); function gn(t) { return gn = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, gn(t) } function Sn(t, e) { for (var r = 0; r < e.length; r++) { var n = e[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, wn(n.key), n) } } function wn(t) { var e = function (t, e) { if ("object" != gn(t) || !t) return t; var r = t[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(t, "string"); if ("object" != gn(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(t) }(t); return "symbol" == gn(e) ? e : String(e) } function En(t, e) { return En = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t }, En(t, e) } function Pn(t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t } function An(t) { return An = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t) }, An(t) } function On(t, e) { kn(t, e), e.add(t) } function kn(t, e) { if (e.has(t)) throw new TypeError("Cannot initialize the same private elements twice on an object") } function In(t, e) { return function (t, e) { return e.get ? e.get.call(t) : e.value }(t, Dn(t, e, "get")) } function Tn(t, e, r) { return function (t, e, r) { if (e.set) e.set.call(t, r); else { if (!e.writable) throw new TypeError("attempted to set read only private field"); e.value = r } }(t, Dn(t, e, "set"), r), r } function Dn(t, e, r) { if (!e.has(t)) throw new TypeError("attempted to " + r + " private field on non-instance"); return e.get(t) } function Rn(t, e, r) { if (!e.has(t)) throw new TypeError("attempted to get private field on non-instance"); return r } var Ln = new WeakMap, jn = new WeakSet, Nn = new WeakSet, Cn = new WeakSet, Bn = new WeakSet, Mn = new WeakSet, Fn = new WeakSet; function Gn(t) { var e = t.code && "AdsNotFound" === t.code; switch (t.type) { case "adCompleted": In(this, Ln) ? (this._setRewardedState(a.REWARDED), this._setRewardedState(a.CLOSED)) : this._setInterstitialState(i.CLOSED); break; case "adError": In(this, Ln) ? this._setRewardedState(a.FAILED) : this._setInterstitialState(i.FAILED); break; case "adDismissed": In(this, Ln) ? this._setRewardedState(e ? a.FAILED : a.CLOSED) : this._setInterstitialState(e ? i.FAILED : i.CLOSED) } } function Wn(t) { t && "ok" === t.status && (this._isPlayerAuthorized = 2 === t.loginStatus || 3 === t.loginStatus), this._isPlayerAuthorized ? this._platformSdk.userProfile() : (this._isInitialized = !0, this._resolvePromiseDecorator(f.INITIALIZE)) } function zn(t) { "ok" === t.status && (this._playerId = t.uid, this._playerName = t.nick, this._playerPhotos = [t.avatar]), this._isInitialized = !0, this._resolvePromiseDecorator(f.INITIALIZE) } function Un(t) { "ok" === t.status ? (this._resolvePromiseDecorator(f.AUTHORIZE_PLAYER), this._platformSdk.reloadWindow()) : this._rejectPromiseDecorator(f.AUTHORIZE_PLAYER, t.errmsg) } function Hn(t) { 0 !== (null == t ? void 0 : t.length) ? this._resolvePromiseDecorator(f.GET_CATALOG, t) : this._rejectPromiseDecorator(f.GET_CATALOG) } function xn(t) { t && t.uid ? this._resolvePromiseDecorator(f.PURCHASE, t.uid) : this._rejectPromiseDecorator(f.PURCHASE) } const Yn = function (e) { !function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && En(t, e) }(c, e); var r, n, o, s, u = (o = c, s = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (t) { return !1 } }(), function () { var t, e = An(o); if (s) { var r = An(this).constructor; t = Reflect.construct(e, arguments, r) } else t = e.apply(this, arguments); return function (t, e) { if (e && ("object" === gn(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return Pn(t) }(this, t) }); function c() { var t, e, r, n; !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, c); for (var o = arguments.length, i = new Array(o), a = 0; a < o; a++)i[a] = arguments[a]; return On(Pn(t = u.call.apply(u, [this].concat(i))), Fn), On(Pn(t), Mn), On(Pn(t), Bn), On(Pn(t), Cn), On(Pn(t), Nn), On(Pn(t), jn), n = { writable: !0, value: !1 }, kn(e = Pn(t), r = Ln), r.set(e, n), t } return r = c, (n = [{ key: "platformId", get: function () { return t.VK_PLAY } }, { key: "isPlayerAuthorizationSupported", get: function () { return !0 } }, { key: "isClipboardSupported", get: function () { return !1 } }, { key: "initialize", value: function () { var t = this; if (this._isInitialized) return Promise.resolve(); var e = this._getPromiseDecorator(f.INITIALIZE); if (!e) if (e = this._createPromiseDecorator(f.INITIALIZE), this._options && this._options.gameId) { var r = this._options.gameId, n = { appid: r, userProfileCallback: function (e) { return Rn(t, Cn, zn).call(t, e) }, getLoginStatusCallback: function (e) { return Rn(t, Nn, Wn).call(t, e) }, registerUserCallback: function (e) { return Rn(t, Bn, Un).call(t, e) }, adsCallback: function (e) { return Rn(t, jn, Gn).call(t, e) }, getGameInventoryItemsCallback: function (e) { return Rn(t, Mn, Hn).call(t, e) }, paymentReceivedCallback: function (e) { return Rn(t, Fn, xn).call(t, e) } }; Ye("https://vkplay.ru/app/".concat(r, "/static/mailru.core.js")).then((function () { Ve("iframeApi").then((function () { window.iframeApi(n).then((function (e) { t._platformSdk = e, t._platformSdk.getLoginStatus() })) })) })) } else this._rejectPromiseDecorator(f.INITIALIZE, m); return e.promise } }, { key: "showInterstitial", value: function () { var t = this; Tn(this, Ln, !1), this._platformSdk.showAds({ interstitial: !0 }).then((function () { t._setInterstitialState(i.OPENED) })).catch((function () { t._setInterstitialState(i.FAILED) })) } }, { key: "showRewarded", value: function () { var t = this; Tn(this, Ln, !0), this._platformSdk.showAds({ interstitial: !1 }).then((function () { t._setRewardedState(a.OPENED) })).catch((function () { t._setRewardedState(a.FAILED) })) } }, { key: "authorizePlayer", value: function () { if (this._isPlayerAuthorized) return Promise.resolve(); var t = this._getPromiseDecorator(f.AUTHORIZE_PLAYER); return t || (t = this._createPromiseDecorator(f.AUTHORIZE_PLAYER), this._platformSdk.registerUser()), t } }, { key: "getPaymentsCatalog", value: function () { var t = this._getPromiseDecorator(f.GET_CATALOG); return t || (t = this._createPromiseDecorator(f.GET_CATALOG), this._platformSdk.getGameInventoryItems()), t.promise } }, { key: "purchase", value: function (t) { if (!t) return Promise.reject(); var e = this._getPromiseDecorator(f.PURCHASE); return e || (e = this._createPromiseDecorator(f.PURCHASE), this._platformSdk.paymentFrameItem(t)), e.promise } }]) && Sn(r.prototype, n), Object.defineProperty(r, "prototype", { writable: !1 }), c }(xe); function Vn(t) { return Vn = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, Vn(t) } function Zn(t, e) { var r = Object.keys(t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(t); e && (n = n.filter((function (e) { return Object.getOwnPropertyDescriptor(t, e).enumerable }))), r.push.apply(r, n) } return r } function Kn(t) { for (var e = 1; e < arguments.length; e++) { var r = null != arguments[e] ? arguments[e] : {}; e % 2 ? Zn(Object(r), !0).forEach((function (e) { no(t, e, r[e]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r)) : Zn(Object(r)).forEach((function (e) { Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e)) })) } return t } function Jn(t, e) { for (var r = 0; r < e.length; r++) { var n = e[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, oo(n.key), n) } } function qn() { return qn = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (t, e, r) { var n = function (t, e) { for (; !Object.prototype.hasOwnProperty.call(t, e) && null !== (t = Qn(t));); return t }(t, e); if (n) { var o = Object.getOwnPropertyDescriptor(n, e); return o.get ? o.get.call(arguments.length < 3 ? t : r) : o.value } }, qn.apply(this, arguments) } function Xn(t, e) { return Xn = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t }, Xn(t, e) } function $n(t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t } function Qn(t) { return Qn = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t) }, Qn(t) } function to(t, e) { ro(t, e), e.add(t) } function eo(t, e, r) { ro(t, e), e.set(t, r) } function ro(t, e) { if (e.has(t)) throw new TypeError("Cannot initialize the same private elements twice on an object") } function no(t, e, r) { return (e = oo(e)) in t ? Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }) : t[e] = r, t } function oo(t) { var e = function (t, e) { if ("object" != Vn(t) || !t) return t; var r = t[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(t, "string"); if ("object" != Vn(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(t) }(t); return "symbol" == Vn(e) ? e : String(e) } function io(t, e, r) { if (!e.has(t)) throw new TypeError("attempted to get private field on non-instance"); return r } function ao(t, e) { var r = function (t, e, r) { if (!e.has(t)) throw new TypeError("attempted to get private field on non-instance"); return e.get(t) }(t, e); return function (t, e) { return e.get ? e.get.call(t) : e.value }(t, r) } var so = "AUTHORIZED", uo = { VALUABLE_ACCESS: "VALUABLE_ACCESS", PHOTO_CONTENT: "PHOTO_CONTENT" }, co = new WeakMap, lo = new WeakMap, fo = new WeakMap, po = new WeakSet, yo = new WeakSet, ho = new WeakSet, mo = new WeakSet, vo = new WeakSet, _o = new WeakSet, bo = new WeakSet, go = new WeakSet, So = new WeakSet, wo = new WeakSet, Eo = new WeakSet, Po = new WeakSet, Ao = new WeakSet, Oo = new WeakSet, ko = new WeakSet, Io = new WeakSet; function To() { return { userProfile: { fields: "uid,name,pic50x50,pic128x128,pic_base", method: "users.getCurrentUser" }, hasAppPermission: function (t) { return { method: "users.hasAppPermission", ext_perm: t } } } } function Do() { var t = this; return { userProfileCallback: function (e, r, n) { return io(t, po, Lo).call(t, e, r, n) }, hasValueAccessCallback: function (e, r, n) { return io(t, ho, No).call(t, r, n) } } } function Ro() { var t = this; return { showPermissions: function () { return io(t, mo, Co).call(t) }, loadAd: function (e) { return io(t, vo, Bo).call(t, e) }, showLoadedAd: function (e, r) { return io(t, _o, Mo).call(t, r) }, showAd: function (e, r) { return io(t, bo, Fo).call(t, r) }, requestBannerAds: function (e, r) { return io(t, go, Go).call(t, e, r) }, showBannerAds: function (e, r) { return io(t, wo, zo).call(t, r) }, hideBannerAds: function (e, r) { return io(t, So, Wo).call(t, r) }, setBannerFormat: function (e) { return io(t, Eo, Uo).call(t, e) }, showInvite: function (e) { return io(t, Po, Ho).call(t, e) }, showRatingDialog: function (e, r) { return io(t, Ao, xo).call(t, e, r) }, joinGroup: function (e, r) { return io(t, Oo, Yo).call(t, e, r) }, showLoginSuggestion: function (e, r) { return io(t, yo, jo).call(t, e, r) }, postMediatopic: function (e, r) { return io(t, ko, Vo).call(t, e, r) }, isAdBlockEnabled: function (e, r) { return io(t, Io, Zo).call(t, e, r) } } } function Lo(t, e) { "ok" === t && (this._playerId = e.uid, this._playerName = e.name, this._playerPhotos = [e.pic50x50, e.pic128x128, e.pic_base]), this._isInitialized = !0, this._platformSdk.Client.call(ao(this, co).hasAppPermission(uo.VALUABLE_ACCESS), ao(this, lo).hasValueAccessCallback) } function jo(t, e) { if ("error" === t) return this._isPlayerAuthorized = !1, void this._rejectPromiseDecorator(f.AUTHORIZE_PLAYER, e); this._isPlayerAuthorized = !0, this._resolvePromiseDecorator(f.AUTHORIZE_PLAYER) } function No(t) { if (this._hasValuableAccessPermission = !!t, this._defaultStorageType = this._hasValuableAccessPermission ? u.PLATFORM_INTERNAL : u.LOCAL_STORAGE, this._hasValuableAccessPermission || this._hasValuableAccessPermissionShowed) this._resolvePromiseDecorator(f.INITIALIZE); else { var e = Object.values(uo).map((function (t) { return '"'.concat(t, '"') })).join(","); this._platformSdk.UI.showPermissions("[".concat(e, "]")) } } function Co() { this._hasValuableAccessPermissionShowed = !0, this._platformSdk.Client.call(ao(this, co).hasAppPermission(uo.VALUABLE_ACCESS), ao(this, lo).hasValueAccessCallback) } function Bo(t) { "error" === t ? this._setRewardedState(a.FAILED) : (this._setRewardedState(a.OPENED), this._platformSdk.UI.showLoadedAd()) } function Mo(t) { switch (t) { case "complete": this._setRewardedState(a.REWARDED), this._setRewardedState(a.CLOSED); break; case "skip": this._setRewardedState(a.CLOSED); break; default: this._setRewardedState(a.FAILED) } } function Fo(t) { switch (t) { case "ready": case "ad_prepared": break; case "ad_shown": this._setInterstitialState(i.OPENED), this._setInterstitialState(i.CLOSED); break; default: this._setInterstitialState(i.FAILED) } } function Go(t, e) { if ("error" !== t) switch (e) { case "ad_loaded": this._platformSdk.invokeUIMethod("showBannerAds"); break; case "banner_shown": case "ad_shown": this._setBannerState(s.SHOWN); break; case "hidden_by_user": this._setBannerState(s.HIDDEN) } else this._setBannerState(s.FAILED) } function Wo(t) { t ? this._setBannerState(s.HIDDEN) : this._setBannerState(s.FAILED) } function zo(t) { t || this._setBannerState(s.FAILED) } function Uo(t) { "error" === t ? this._setBannerState(s.FAILED) : this.showBanner(this._platformBannerOptions) } function Ho(t) { "error" === t ? this._rejectPromiseDecorator(f.INVITE_FRIENDS) : this._resolvePromiseDecorator(f.INVITE_FRIENDS) } function xo(t, e) { "error" === t ? this._rejectPromiseDecorator(f.RATE, e) : this._resolvePromiseDecorator(f.RATE) } function Yo(t, e) { "error" === t ? this._rejectPromiseDecorator(f.JOIN_COMMUNITY, e) : this._resolvePromiseDecorator(f.JOIN_COMMUNITY) } function Vo(t, e) { "error" === t ? this._rejectPromiseDecorator(f.CREATE_POST, e) : this._resolvePromiseDecorator(f.CREATE_POST) } function Zo(t, e) { "ok" === t ? this._resolvePromiseDecorator(f.ADBLOCK_DETECT, "true" === e) : this._rejectPromiseDecorator(f.ADBLOCK_DETECT) } const Ko = function (e) { !function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && Xn(t, e) }(l, e); var r, n, o, s, c = (o = l, s = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (t) { return !1 } }(), function () { var t, e = Qn(o); if (s) { var r = Qn(this).constructor; t = Reflect.construct(e, arguments, r) } else t = e.apply(this, arguments); return function (t, e) { if (e && ("object" === Vn(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return $n(t) }(this, t) }); function l() { var t; !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, l); for (var e = arguments.length, r = new Array(e), n = 0; n < e; n++)r[n] = arguments[n]; return to($n(t = c.call.apply(c, [this].concat(r))), Io), to($n(t), ko), to($n(t), Oo), to($n(t), Ao), to($n(t), Po), to($n(t), Eo), to($n(t), wo), to($n(t), So), to($n(t), go), to($n(t), bo), to($n(t), _o), to($n(t), vo), to($n(t), mo), to($n(t), ho), to($n(t), yo), to($n(t), po), eo($n(t), fo, { get: Ro, set: void 0 }), eo($n(t), lo, { get: Do, set: void 0 }), eo($n(t), co, { get: To, set: void 0 }), no($n(t), "_hasValuableAccessPermission", !1), no($n(t), "_hasValuableAccessPermissionShowed", !1), no($n(t), "_platformBannerOptions", {}), t } return r = l, (n = [{ key: "platformId", get: function () { return t.OK } }, { key: "isPlayerAuthorizationSupported", get: function () { return !0 } }, { key: "isBannerSupported", get: function () { return !0 } }, { key: "isJoinCommunitySupported", get: function () { return !0 } }, { key: "isInviteFriendsSupported", get: function () { return !0 } }, { key: "isCreatePostSupported", get: function () { return !0 } }, { key: "isRateSupported", get: function () { return !0 } }, { key: "isExternalLinksAllowed", get: function () { return !1 } }, { key: "isClipboardSupported", get: function () { return !1 } }, { key: "initialize", value: function () { var t = this; if (this._isInitialized) return Promise.resolve(); var e = this._getPromiseDecorator(f.INITIALIZE); return e || (e = this._createPromiseDecorator(f.INITIALIZE), Ye("//api.ok.ru/js/fapi5.js").then((function () { Ve("FAPI").then((function () { t._platformSdk = window.FAPI, window.API_callback = function (e, r, n) { return ao(t, fo)[e](r, n) }; var e = t._platformSdk.Util.getRequestParameters() || {}; e.api_server && e.apiconnection ? t._platformSdk.init(e.api_server, e.apiconnection, (function () { var e, r = null === (e = t._platformSdk) || void 0 === e ? void 0 : e.saved_state; t._isPlayerAuthorized = !r || r === so, t._isPlayerAuthorized ? t._platformSdk.Client.call(ao(t, co).userProfile, ao(t, lo).userProfileCallback) : (t._isInitialized = !0, t._resolvePromiseDecorator(f.INITIALIZE)) }), (function () { t._rejectPromiseDecorator(f.INITIALIZE) })) : t._rejectPromiseDecorator(f.INITIALIZE, _) })) }))), e.promise } }, { key: "authorizePlayer", value: function () { if (this._isPlayerAuthorized) return Promise.resolve(); var t = this._getPromiseDecorator(f.AUTHORIZE_PLAYER); return t || (t = this._createPromiseDecorator(f.AUTHORIZE_PLAYER), this._platformSdk.UI.showLoginSuggestion(so)), t.promise } }, { key: "isStorageSupported", value: function (t) { return t === u.PLATFORM_INTERNAL || qn(Qn(l.prototype), "isStorageSupported", this).call(this, t) } }, { key: "isStorageAvailable", value: function (t) { return t === u.PLATFORM_INTERNAL ? this._hasValuableAccessPermission : qn(Qn(l.prototype), "isStorageAvailable", this).call(this, t) } }, { key: "getDataFromStorage", value: function (t, e, r) { var n = this; return e === u.PLATFORM_INTERNAL ? this._hasValuableAccessPermission ? new Promise((function (e, o) { var i = Array.isArray(t) ? t : [t], a = { method: "storage.get", keys: i, scope: "CUSTOM" }; n._platformSdk.Client.call(a, (function (n, a, s) { if (a) { var u = a.data || {}; if (Array.isArray(t)) { var c = []; return i.forEach((function (t) { if ("" !== u[t] && void 0 !== u[t]) { var e = u[t]; if (r) try { e = JSON.parse(u[t]) } catch (t) { } c.push(e) } else c.push(null) })), void e(c) } if ("" === u[t] || void 0 === u[t]) return void e(null); var l = u[t]; if (r) try { l = JSON.parse(u[t]) } catch (t) { } e(l) } else o(s) })) })) : Promise.reject(d) : qn(Qn(l.prototype), "getDataFromStorage", this).call(this, t, e, r) } }, { key: "setDataToStorage", value: function (t, e, r) { var n = this; if (r === u.PLATFORM_INTERNAL) { if (!this._hasValuableAccessPermission) return Promise.reject(d); for (var o = Array.isArray(t) ? t : [t], i = Array.isArray(t) ? e : [e], a = [], s = function () { var t = o[c], e = i[c]; "string" != typeof e && (e = JSON.stringify(e)); var r = { method: "storage.set", key: t, value: e }, s = new Promise((function (t, e) { n._platformSdk.Client.call(r, (function (r, n) { n ? t() : e() })) })); a.push(s) }, c = 0; c < o.length; c++)s(); return Promise.all(a) } return qn(Qn(l.prototype), "setDataToStorage", this).call(this, t, e, r) } }, { key: "deleteDataFromStorage", value: function (t, e) { var r = this; if (e === u.PLATFORM_INTERNAL) { if (!this._hasValuableAccessPermission) return Promise.reject(d); for (var n = Array.isArray(t) ? t : [t], o = [], i = function () { var t = { method: "storage.set", key: n[a] }, e = new Promise((function (e, n) { r._platformSdk.Client.call(t, (function (t, r) { r ? e() : n() })) })); o.push(e) }, a = 0; a < n.length; a++)i(); return Promise.all(o) } return qn(Qn(l.prototype), "deleteDataFromStorage", this).call(this, t, e) } }, { key: "showInterstitial", value: function () { try { this._platformSdk.UI.showAd() } catch (t) { this._setInterstitialState(i.FAILED) } } }, { key: "showRewarded", value: function () { try { this._platformSdk.UI.loadAd() } catch (t) { this._setRewardedState(a.FAILED) } } }, { key: "showBanner", value: function (t) { if (t) { if ("string" == typeof t.layoutType) return this._platformBannerOptions = Kn(Kn({}, t), {}, { layoutType: null }), void this._platformSdk.invokeUIMethod("setBannerFormat", t.layoutType); if ("string" == typeof t.position) return void this._platformSdk.invokeUIMethod("requestBannerAds", t.position) } this._platformSdk.invokeUIMethod("requestBannerAds", "bottom") } }, { key: "hideBanner", value: function () { this._platformSdk.invokeUIMethod("hideBannerAds") } }, { key: "checkAdBlock", value: function () { var t = this._getPromiseDecorator(f.ADBLOCK_DETECT); return t || (t = this._createPromiseDecorator(f.ADBLOCK_DETECT), this._platformSdk.invokeUIMethod("isAdBlockEnabled")), t.promise } }, { key: "inviteFriends", value: function (t) { var e = (t || {}).text; if (!t || "string" != typeof e) return Promise.reject(); var r = this._getPromiseDecorator(f.INVITE_FRIENDS); return r || (r = this._createPromiseDecorator(f.INVITE_FRIENDS), e.length > 120 ? this._rejectPromiseDecorator(f.INVITE_FRIENDS, b) : this._platformSdk.UI.showInvite(e)), r.promise } }, { key: "rate", value: function () { var t = this._getPromiseDecorator(f.RATE); return t || (t = this._createPromiseDecorator(f.RATE), this._platformSdk.UI.showRatingDialog()), t.promise } }, { key: "createPost", value: function (t) { if (!t || null == t || !t.media) return Promise.reject(); var e, r = this._getPromiseDecorator(f.CREATE_POST); return r || (r = this._createPromiseDecorator(f.CREATE_POST), this._platformSdk.UI.postMediatopic(t, null !== (e = t.status) && void 0 !== e && e)), r.promise } }, { key: "joinCommunity", value: function (t) { if (!t || null == t || !t.groupId) return Promise.reject(); var e, r = this._getPromiseDecorator(f.JOIN_COMMUNITY); return r || (r = this._createPromiseDecorator(f.JOIN_COMMUNITY), this._platformSdk.UI.joinGroup(t.groupId, null !== (e = t.enableMessages) && void 0 !== e && e)), r.promise } }]) && Jn(r.prototype, n), Object.defineProperty(r, "prototype", { writable: !1 }), l }(xe); function Jo(t) { return Jo = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, Jo(t) } function qo(t, e) { for (var r = 0; r < e.length; r++) { var n = e[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, Xo(n.key), n) } } function Xo(t) { var e = function (t, e) { if ("object" != Jo(t) || !t) return t; var r = t[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(t, "string"); if ("object" != Jo(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(t) }(t); return "symbol" == Jo(e) ? e : String(e) } function $o(t, e) { return $o = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t }, $o(t, e) } function Qo(t) { return Qo = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t) }, Qo(t) } const ti = function (e) { !function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && $o(t, e) }(c, e); var r, n, o, s, u = (o = c, s = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (t) { return !1 } }(), function () { var t, e = Qo(o); if (s) { var r = Qo(this).constructor; t = Reflect.construct(e, arguments, r) } else t = e.apply(this, arguments); return function (t, e) { if (e && ("object" === Jo(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) }(this, t) }); function c() { return function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, c), u.apply(this, arguments) } return r = c, (n = [{ key: "platformId", get: function () { return t.PLAYGAMA } }, { key: "isExternalLinksAllowed", get: function () { return !1 } }, { key: "initialize", value: function () { var t = this; if (this._isInitialized) return Promise.resolve(); var e = this._getPromiseDecorator(f.INITIALIZE); return e || (e = this._createPromiseDecorator(f.INITIALIZE), Ye("https://developer.playgama.com/sdk/v1.js").then((function () { Ve("PLAYGAMA_SDK").then((function () { t._platformSdk = window.PLAYGAMA_SDK, t._isInitialized = !0, t._resolvePromiseDecorator(f.INITIALIZE) })) }))), e.promise } }, { key: "showInterstitial", value: function () { var t = this; this._platformSdk.advService.showInterstitial({ onOpen: function () { t._setInterstitialState(i.OPENED) }, onEmpty: function () { t._setInterstitialState(i.FAILED) }, onClose: function () { t._setInterstitialState(i.CLOSED) }, onError: function () { t._setInterstitialState(i.FAILED) } }) } }, { key: "showRewarded", value: function () { var t = this; this._platformSdk.advService.showRewarded({ onOpen: function () { t._setRewardedState(a.OPENED) }, onRewarded: function () { t._setRewardedState(a.REWARDED) }, onEmpty: function () { t._setRewardedState(a.FAILED) }, onClose: function () { t._setRewardedState(a.CLOSED) }, onError: function () { t._setRewardedState(a.FAILED) } }) } }]) && qo(r.prototype, n), Object.defineProperty(r, "prototype", { writable: !1 }), c }(xe); function ei(t) { return ei = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, ei(t) } function ri(t, e) { for (var r = 0; r < e.length; r++) { var n = e[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, ui(n.key), n) } } function ni() { return ni = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (t, e, r) { var n = function (t, e) { for (; !Object.prototype.hasOwnProperty.call(t, e) && null !== (t = ai(t));); return t }(t, e); if (n) { var o = Object.getOwnPropertyDescriptor(n, e); return o.get ? o.get.call(arguments.length < 3 ? t : r) : o.value } }, ni.apply(this, arguments) } function oi(t, e) { return oi = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t }, oi(t, e) } function ii(t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t } function ai(t) { return ai = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t) }, ai(t) } function si(t, e, r) { return (e = ui(e)) in t ? Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }) : t[e] = r, t } function ui(t) { var e = function (t, e) { if ("object" != ei(t) || !t) return t; var r = t[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(t, "string"); if ("object" != ei(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(t) }(t); return "symbol" == ei(e) ? e : String(e) } function ci(t, e, r) { !function (t, e) { if (e.has(t)) throw new TypeError("Cannot initialize the same private elements twice on an object") }(t, e), e.set(t, r) } function li(t, e, r) { return function (t, e, r) { if (e.set) e.set.call(t, r); else { if (!e.writable) throw new TypeError("attempted to set read only private field"); e.value = r } }(t, pi(t, e, "set"), r), r } function fi(t, e) { return function (t, e) { return e.get ? e.get.call(t) : e.value }(t, pi(t, e, "get")) } function pi(t, e, r) { if (!e.has(t)) throw new TypeError("attempted to " + r + " private field on non-instance"); return e.get(t) } var yi = new WeakMap, di = new WeakMap; const hi = function (e) { !function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && oi(t, e) }(p, e); var r, n, o, s, c = (o = p, s = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (t) { return !1 } }(), function () { var t, e = ai(o); if (s) { var r = ai(this).constructor; t = Reflect.construct(e, arguments, r) } else t = e.apply(this, arguments); return function (t, e) { if (e && ("object" === ei(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return ii(t) }(this, t) }); function p() { var t; !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, p); for (var e = arguments.length, r = new Array(e), n = 0; n < e; n++)r[n] = arguments[n]; return ci(ii(t = c.call.apply(c, [this].concat(r))), yi, { writable: !0, value: void 0 }), ci(ii(t), di, { writable: !0, value: void 0 }), si(ii(t), "_defaultStorageType", u.PLATFORM_INTERNAL), si(ii(t), "_isPlayerAuthorized", !0), t } return r = p, (n = [{ key: "platformId", get: function () { return t.PLAYDECK } }, { key: "platformLanguage", get: function () { return fi(this, yi) ? fi(this, yi) : ni(ai(p.prototype), "platformLanguage", this) } }, { key: "isPlayerAuthorizationSupported", get: function () { return !0 } }, { key: "isShareSupported", get: function () { return !0 } }, { key: "isPaymentsSupported", get: function () { return !0 } }, { key: "initialize", value: function () { var t = this; if (this._isInitialized) return Promise.resolve(); var e = this._getPromiseDecorator(f.INITIALIZE); return e || (e = this._createPromiseDecorator(f.INITIALIZE), window.addEventListener("message", (function e(r) { var n = r.data; if (n && n.playdeck) { var o = n.playdeck; if ("getUserProfile" === o.method) { var i = o.value; t._playerId = i.telegramId, t._playerPhotos = [i.avatar], t._playerName = i.username, li(t, yi, i.locale), li(t, di, i.params), window.removeEventListener("message", e), t._isInitialized = !0, t._resolvePromiseDecorator(f.INITIALIZE) } } })), window.parent.postMessage({ playdeck: { method: "getUserProfile" } }, "*")), e.promise } }, { key: "sendMessage", value: function (t) { switch (t) { case l.GAME_OVER: return window.parent.postMessage({ playdeck: { method: "gameEnd" } }, "*"), Promise.resolve(); case l.GAME_READY: return window.parent.postMessage({ playdeck: { method: "loading", value: 100 } }, "*"), Promise.resolve(); default: return ni(ai(p.prototype), "sendMessage", this).call(this, t) } } }, { key: "showInterstitial", value: function () { var t = this; window.addEventListener("message", (function e(r) { var n = r.data, o = null == n ? void 0 : n.playdeck; if (o) switch (o.method) { case "startAd": t._setInterstitialState(i.OPENED); break; case "rewardedAd": case "skipAd": t._setInterstitialState(i.CLOSED), window.removeEventListener("message", e); break; case "errAd": case "notFoundAd": t._setInterstitialState(i.FAILED), window.removeEventListener("message", e) } })), window.parent.postMessage({ playdeck: { method: "showAd" } }, "*") } }, { key: "showRewarded", value: function () { var t = this; window.addEventListener("message", (function e(r) { var n = r.data, o = null == n ? void 0 : n.playdeck; if (o) switch (o.method) { case "startAd": t._setRewardedState(a.OPENED); break; case "rewardedAd": t._setRewardedState(a.REWARDED), t._setRewardedState(a.CLOSED), window.removeEventListener("message", e); break; case "skipAd": t._setRewardedState(a.CLOSED), window.removeEventListener("message", e); break; case "errAd": case "notFoundAd": t._setRewardedState(a.FAILED), window.removeEventListener("message", e) } })), window.parent.postMessage({ playdeck: { method: "showAd" } }, "*") } }, { key: "authorizePlayer", value: function () { return Promise.resolve() } }, { key: "isStorageSupported", value: function (t) { return t === u.PLATFORM_INTERNAL || ni(ai(p.prototype), "isStorageSupported", this).call(this, t) } }, { key: "isStorageAvailable", value: function (t) { return t === u.PLATFORM_INTERNAL || ni(ai(p.prototype), "isStorageAvailable", this).call(this, t) } }, { key: "getDataFromStorage", value: function (t, e, r) { return e === u.PLATFORM_INTERNAL ? new Promise((function (e) { var r = {}, n = Array.isArray(t) ? t : [t]; window.addEventListener("message", (function o(i) { var a = i.data; if (a && a.playdeck) { var s = a.playdeck; if ("getData" === s.method && (r[s.key] = s.value.data), Object.keys(r).length === n.length) { window.removeEventListener("message", o); var u = Array.isArray(t) ? t.map((function (t) { return r[t] })) : r[t]; e(u) } } })), n.forEach((function (t) { return window.parent.postMessage({ playdeck: { method: "getData", key: t } }, "*") })) })) : ni(ai(p.prototype), "getDataFromStorage", this).call(this, t, e, r) } }, { key: "setDataToStorage", value: function (t, e, r) { return r === u.PLATFORM_INTERNAL ? new Promise((function (r) { var n = Array.isArray(t) ? t : [t], o = (Array.isArray(e) ? e : [e]).map((function (t) { return "string" != typeof t ? JSON.stringify(t) : t })); n.forEach((function (t, e) { return window.parent.postMessage({ playdeck: { method: "setData", key: t, value: o[e] } }, "*") })), r() })) : ni(ai(p.prototype), "setDataToStorage", this).call(this, t, e, r) } }, { key: "deleteDataFromStorage", value: function (t, e) { return e === u.PLATFORM_INTERNAL ? new Promise((function (e) { (Array.isArray(t) ? t : [t]).forEach((function (t) { return window.parent.postMessage({ playdeck: { method: "setData", key: t, value: "" } }, "*") })), e() })) : ni(ai(p.prototype), "deleteDataFromStorage", this).call(this, t, e) } }, { key: "share", value: function () { window.parent.postMessage({ playdeck: { method: "customShare", value: fi(this, di) } }, "*") } }, { key: "purchase", value: function (t) { var e = this, r = this._getPromiseDecorator(f.PURCHASE); return r || (r = this._createPromiseDecorator(f.PURCHASE), window.addEventListener("message", (function t(e) { var r = e.data, n = null == r ? void 0 : r.playdeck; n && "requestPayment" === n.method && (console.log(n.value.url), window.parent.postMessage({ playdeck: { method: "openTelegramLink", value: n.value.url } }, "*"), window.removeEventListener("message", t)) })), window.addEventListener("message", (function t(r) { var n = r.data, o = null == n ? void 0 : n.playdeck; o && "invoiceClosed" === o.method && ("paid" === o.value.status ? (window.removeEventListener("message", t), e._resolvePromiseDecorator(f.PURCHASE, o.value)) : "cancelled" !== o.value.status && "failed" !== o.value.status || (window.removeEventListener("message", t), e._rejectPromiseDecorator(f.PURCHASE, o.value))) })), window.parent.postMessage({ playdeck: { method: "requestPayment", value: t } }, "*")), r.promise } }]) && ri(r.prototype, n), Object.defineProperty(r, "prototype", { writable: !1 }), p }(xe); function mi(t) { return mi = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, mi(t) } function vi(t, e) { var r = Object.keys(t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(t); e && (n = n.filter((function (e) { return Object.getOwnPropertyDescriptor(t, e).enumerable }))), r.push.apply(r, n) } return r } function _i(t) { for (var e = 1; e < arguments.length; e++) { var r = null != arguments[e] ? arguments[e] : {}; e % 2 ? vi(Object(r), !0).forEach((function (e) { var n, o, i; n = t, o = e, i = r[e], (o = gi(o)) in n ? Object.defineProperty(n, o, { value: i, enumerable: !0, configurable: !0, writable: !0 }) : n[o] = i })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r)) : vi(Object(r)).forEach((function (e) { Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e)) })) } return t } function bi(t, e) { for (var r = 0; r < e.length; r++) { var n = e[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, gi(n.key), n) } } function gi(t) { var e = function (t, e) { if ("object" != mi(t) || !t) return t; var r = t[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(t, "string"); if ("object" != mi(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(t) }(t); return "symbol" == mi(e) ? e : String(e) } function Si() { return Si = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (t, e, r) { var n = function (t, e) { for (; !Object.prototype.hasOwnProperty.call(t, e) && null !== (t = Pi(t));); return t }(t, e); if (n) { var o = Object.getOwnPropertyDescriptor(n, e); return o.get ? o.get.call(arguments.length < 3 ? t : r) : o.value } }, Si.apply(this, arguments) } function wi(t, e) { return wi = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t }, wi(t, e) } function Ei(t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t } function Pi(t) { return Pi = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t) }, Pi(t) } function Ai(t, e) { if (e.has(t)) throw new TypeError("Cannot initialize the same private elements twice on an object") } function Oi(t, e) { return function (t, e) { return e.get ? e.get.call(t) : e.value }(t, ki(t, e, "get")) } function ki(t, e, r) { if (!e.has(t)) throw new TypeError("attempted to " + r + " private field on non-instance"); return e.get(t) } var Ii = new WeakMap, Ti = new WeakSet; function Di() { this._playerId = this._platformSdk.player.getId(), this._playerName = this._platformSdk.player.getName(), this._playerPhotos = [this._platformSdk.player.getPhoto()] } const Ri = function (e) { !function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && wi(t, e) }(y, e); var r, n, o, c, p = (o = y, c = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (t) { return !1 } }(), function () { var t, e = Pi(o); if (c) { var r = Pi(this).constructor; t = Reflect.construct(e, arguments, r) } else t = e.apply(this, arguments); return function (t, e) { if (e && ("object" === mi(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return Ei(t) }(this, t) }); function y() { var t, e, r; !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, y); for (var n = arguments.length, o = new Array(n), i = 0; i < n; i++)o[i] = arguments[i]; return Ai(e = Ei(t = p.call.apply(p, [this].concat(o))), r = Ti), r.add(e), function (t, e, r) { Ai(t, e), e.set(t, { writable: !0, value: void 0 }) }(Ei(t), Ii), t } return r = y, (n = [{ key: "platformId", get: function () { return t.WORTAL } }, { key: "platformLanguage", get: function () { if (this._platformSdk) { var t = this._platformSdk.session.getLocale(); if (t) return t.toLowerCase().slice(0, 2) } return Si(Pi(y.prototype), "platformLanguage", this) } }, { key: "deviceType", get: function () { var t = this._platformSdk.session.getDevice(); return t ? t.toLowerCase() : Si(Pi(y.prototype), "deviceType", this) } }, { key: "isExternalLinksAllowed", get: function () { return !1 } }, { key: "initialize", value: function () { var t = this; if (this._isInitialized) return Promise.resolve(); var e = this._getPromiseDecorator(f.INITIALIZE); return e || (e = this._createPromiseDecorator(f.INITIALIZE), Ye("https://storage.googleapis.com/cdn-wortal-ai/v2/wortal-core.js").then((function () { Ve("Wortal", "initializeAsync").then((function () { window.Wortal.initializeAsync().then((function () { var e, r, n; t._platformSdk = window.Wortal, e = t, r = Ii, n = t._platformSdk.getSupportedAPIs(), function (t, e, r) { if (e.set) e.set.call(t, r); else { if (!e.writable) throw new TypeError("attempted to set read only private field"); e.value = r } }(e, ki(e, r, "set"), n), t._isBannerSupported = Oi(t, Ii).includes("ads.showBanner"), t._platformSdk.player.onLogin(function (t, e, r) { if (!e.has(t)) throw new TypeError("attempted to get private field on non-instance"); return r }(t, Ti, Di)), t._isInitialized = !0, t._resolvePromiseDecorator(f.INITIALIZE) })) })) }))), e.promise } }, { key: "sendMessage", value: function (t) { switch (t) { case l.GAMEPLAY_STARTED: return this._platformSdk.session.gameplayStart(), Promise.resolve(); case l.GAMEPLAY_STOPPED: return this._platformSdk.session.gameplayStop(), Promise.resolve(); case l.GAME_READY: return this._platformSdk.setLoadingProgress(100), this._platformSdk.startGameAsync(), Promise.resolve(); case l.PLAYER_GOT_ACHIEVEMENT: return this._platformSdk.session.happyTime(), Promise.resolve(); default: return Si(Pi(y.prototype), "sendMessage", this).call(this, t) } } }, { key: "showBanner", value: function (t) { var e = "bottom"; t && "string" == typeof t.position && (e = t.position), this._platformSdk.ads.showBanner(!0, e), this._setBannerState(s.SHOWN) } }, { key: "hideBanner", value: function () { this._platformSdk.ads.showBanner(!1), this._setBannerState(s.HIDDEN) } }, { key: "showInterstitial", value: function (t) { var e = this, r = "next", n = "NextLevel"; t && (t.placement && (r = t.placement), t.description && (n = t.description)), this._platformSdk.ads.showInterstitial(r, n, (function () { e._setInterstitialState(i.OPENED) }), (function () { e._setInterstitialState(i.CLOSED) }), (function () { e._setInterstitialState(i.FAILED) })) } }, { key: "showRewarded", value: function (t) { var e = this, r = "Bonus"; t && t.description && (r = t.description), this._platformSdk.ads.showRewarded(r, (function () { e._setRewardedState(a.OPENED) }), (function () { e._setRewardedState(a.CLOSED) }), (function () { e._setRewardedState(a.CLOSED) }), (function () { e._setRewardedState(a.REWARDED) }), (function () { e._setRewardedState(a.FAILED) })) } }, { key: "checkAdBlock", value: function () { var t = this; return new Promise((function (e) { e(t._platformSdk.ads.isAdBlocked()) })) } }, { key: "isStorageSupported", value: function (t) { return t === u.PLATFORM_INTERNAL ? Oi(this, Ii).includes("player.setDataAsync") : Si(Pi(y.prototype), "isStorageSupported", this).call(this, t) } }, { key: "isStorageAvailable", value: function (t) { return t === u.PLATFORM_INTERNAL ? Oi(this, Ii).includes("player.setDataAsync") : Si(Pi(y.prototype), "isStorageAvailable", this).call(this, t) } }, { key: "getDataFromStorage", value: function (t, e, r) { var n = this; return e === u.PLATFORM_INTERNAL ? new Promise((function (e, r) { var o = Array.isArray(t) ? t : [t]; n._platformSdk.player.getDataAsync(o).then((function (r) { if (n._platformStorageCachedData || (n._platformStorageCachedData = {}), Array.isArray(t)) { for (var o = [], i = 0; i < t.length; i++) { var a = void 0 === r[t[i]] ? null : r[t[i]]; o.push(a), n._platformStorageCachedData[t[i]] = a } e(o) } else { var s = void 0 === r[t] ? null : r[t]; n._platformStorageCachedData[t] = s, e(s) } })).catch((function (t) { return r(t) })) })) : Si(Pi(y.prototype), "getDataFromStorage", this).call(this, t, e, r) } }, { key: "setDataToStorage", value: function (t, e, r) { var n = this; return r === u.PLATFORM_INTERNAL ? new Promise((function (r, o) { var i = null !== n._platformStorageCachedData ? _i({}, n._platformStorageCachedData) : {}; if (Array.isArray(t)) for (var a = 0; a < t.length; a++)i[t[a]] = e[a]; else i[t] = e; n._platformSdk.player.setDataAsync(i).then((function () { n._platformStorageCachedData = i, r() })).catch((function (t) { return o(t) })) })) : Si(Pi(y.prototype), "setDataToStorage", this).call(this, t, e, r) } }, { key: "deleteDataFromStorage", value: function (t, e) { var r = this; return e === u.PLATFORM_INTERNAL ? new Promise((function (e, n) { var o = null !== r._platformStorageCachedData ? _i({}, r._platformStorageCachedData) : {}; if (Array.isArray(t)) for (var i = 0; i < t.length; i++)delete o[t[i]]; else delete o[t]; r._platformSdk.player.setDataAsync(o).then((function () { r._platformStorageCachedData = o, e() })).catch((function (t) { return n(t) })) })) : Si(Pi(y.prototype), "deleteDataFromStorage", this).call(this, t, e) } }]) && bi(r.prototype, n), Object.defineProperty(r, "prototype", { writable: !1 }), y }(xe); function Li(t) { return Li = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, Li(t) } function ji(t, e) { for (var r = 0; r < e.length; r++) { var n = e[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, Wi(n.key), n) } } function Ni() { return Ni = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (t, e, r) { var n = function (t, e) { for (; !Object.prototype.hasOwnProperty.call(t, e) && null !== (t = Mi(t));); return t }(t, e); if (n) { var o = Object.getOwnPropertyDescriptor(n, e); return o.get ? o.get.call(arguments.length < 3 ? t : r) : o.value } }, Ni.apply(this, arguments) } function Ci(t, e) { return Ci = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t }, Ci(t, e) } function Bi(t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t } function Mi(t) { return Mi = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t) }, Mi(t) } function Fi(t, e, r) { !function (t, e) { if (e.has(t)) throw new TypeError("Cannot initialize the same private elements twice on an object") }(t, e), e.set(t, r) } function Gi(t, e, r) { return (e = Wi(e)) in t ? Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }) : t[e] = r, t } function Wi(t) { var e = function (t, e) { if ("object" != Li(t) || !t) return t; var r = t[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(t, "string"); if ("object" != Li(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(t) }(t); return "symbol" == Li(e) ? e : String(e) } function zi(t, e, r) { return function (t, e, r) { if (e.set) e.set.call(t, r); else { if (!e.writable) throw new TypeError("attempted to set read only private field"); e.value = r } }(t, Hi(t, e, "set"), r), r } function Ui(t, e) { return function (t, e) { return e.get ? e.get.call(t) : e.value }(t, Hi(t, e, "get")) } function Hi(t, e, r) { if (!e.has(t)) throw new TypeError("attempted to " + r + " private field on non-instance"); return e.get(t) } var xi = new WeakMap, Yi = new WeakMap, Vi = new WeakMap, Zi = new WeakMap; const Ki = function (e) { !function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && Ci(t, e) }(y, e); var r, n, o, s, p = (o = y, s = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (t) { return !1 } }(), function () { var t, e = Mi(o); if (s) { var r = Mi(this).constructor; t = Reflect.construct(e, arguments, r) } else t = e.apply(this, arguments); return function (t, e) { if (e && ("object" === Li(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return Bi(t) }(this, t) }); function y() { var t; !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, y); for (var e = arguments.length, r = new Array(e), n = 0; n < e; n++)r[n] = arguments[n]; return Gi(Bi(t = p.call.apply(p, [this].concat(r))), "_defaultStorageType", u.PLATFORM_INTERNAL), Gi(Bi(t), "_isPlayerAuthorized", !0), Fi(Bi(t), xi, { writable: !0, value: void 0 }), Fi(Bi(t), Yi, { writable: !0, value: void 0 }), Fi(Bi(t), Vi, { writable: !0, value: { onStart: function () { return t._setRewardedState(a.OPENED) }, onSkip: function () { return t._setRewardedState(a.CLOSED) }, onReward: function () { return t._setRewardedState(a.REWARDED) }, onError: function () { return t._setRewardedState(a.FAILED) } } }), Fi(Bi(t), Zi, { writable: !0, value: { onStart: function () { return t._setInterstitialState(i.OPENED) }, onSkip: function () { return t._setInterstitialState(i.CLOSED) }, onError: function () { return t._setInterstitialState(i.FAILED) } } }), t } return r = y, (n = [{ key: "platformId", get: function () { return t.TELEGRAM } }, { key: "platformLanguage", get: function () { return this._platformSdk ? this._platformSdk.initDataUnsafe.user.language_code : Ni(Mi(y.prototype), "platformLanguage", this) } }, { key: "deviceType", get: function () { switch (Ui(this, xi)) { case "android": case "android_x": case "ios": return c.MOBILE; case "tdesktop": case "unigram": case "macos": return c.DESKTOP; default: return Ni(Mi(y.prototype), "deviceType", this) } } }, { key: "isPlayerAuthorizationSupported", get: function () { return !0 } }, { key: "initialize", value: function () { var t = this; if (this._isInitialized) return Promise.resolve(); var e = this._getPromiseDecorator(f.INITIALIZE); return e || (e = this._createPromiseDecorator(f.INITIALIZE), Ye("https://telegram.org/js/telegram-web-app.js").then((function () { t._platformSdk = window.Telegram.WebApp; var e = t._platformSdk.initDataUnsafe.user; t._playerId = e.id, t._playerName = [e.first_name, e.last_name].filter(Boolean).join(" "), t._playerPhotos = [e.photo_url], zi(t, xi, t._platformSdk.platform), t._isInitialized = !0, t._options && t._options.adsgramBlockId ? Ye("https://sad.adsgram.ai/js/sad.min.js").then((function () { zi(t, Yi, window.Adsgram.init({ blockId: t._options.adsgramBlockId })) })).finally((function () { t._resolvePromiseDecorator(f.INITIALIZE) })) : t._resolvePromiseDecorator(f.INITIALIZE) }))), e.promise } }, { key: "sendMessage", value: function (t) { return t === l.GAME_READY ? (this._platformSdk.ready(), Promise.resolve()) : Ni(Mi(y.prototype), "sendMessage", this).call(this, t) } }, { key: "isStorageSupported", value: function (t) { return t === u.PLATFORM_INTERNAL || Ni(Mi(y.prototype), "isStorageSupported", this).call(this, t) } }, { key: "isStorageAvailable", value: function (t) { return t === u.PLATFORM_INTERNAL || Ni(Mi(y.prototype), "isStorageAvailable", this).call(this, t) } }, { key: "getDataFromStorage", value: function (t, e, r) { var n = this; return e === u.PLATFORM_INTERNAL ? new Promise((function (e, o) { Array.isArray(t) ? n._platformSdk.CloudStorage.getItems(t, (function (n, i) { if (n) o(n); else { var a = []; t.forEach((function (t) { var e = i[t]; if (r && "string" == typeof e) try { e = JSON.parse(e) } catch (t) { } a.push(e) })), e(a) } })) : n._platformSdk.CloudStorage.getItem(t, (function (t, n) { t && o(t); var i = n; if (r && "string" == typeof i) try { i = JSON.parse(i) } catch (t) { } e(i) })) })) : Ni(Mi(y.prototype), "getDataFromStorage", this).call(this, t, e) } }, { key: "setDataToStorage", value: function (t, e, r) { var n = this; return r === u.PLATFORM_INTERNAL ? new Promise((function (r) { var o = Array.isArray(t) ? t : [t], i = (Array.isArray(e) ? e : [e]).map((function (t) { return "string" != typeof t ? JSON.stringify(t) : t })); o.forEach((function (t, e) { return n._platformSdk.CloudStorage.setItem(t, i[e]) })), r() })) : Ni(Mi(y.prototype), "setDataToStorage", this).call(this, t, e, r) } }, { key: "deleteDataFromStorage", value: function (t, e) { var r = this; return e === u.PLATFORM_INTERNAL ? new Promise((function (e) { (Array.isArray(t) ? t : [t]).forEach((function (t) { return r._platformSdk.CloudStorage.removeItem(t) })), e() })) : Ni(Mi(y.prototype), "deleteDataFromStorage", this).call(this, t, e) } }, { key: "showInterstitial", value: function () { var t = this; Ui(this, Yi) ? (Ui(this, Yi).addEventListener("onStart", Ui(this, Zi).onStart), Ui(this, Yi).addEventListener("onSkip", Ui(this, Zi).onSkip), Ui(this, Yi).addEventListener("onError", Ui(this, Zi).onError), Ui(this, Yi).addEventListener("onBannerNotFound", Ui(this, Zi).onError), Ui(this, Yi).show().finally((function () { Ui(t, Yi).removeEventListener("onStart", Ui(t, Zi).onStart), Ui(t, Yi).removeEventListener("onSkip", Ui(t, Zi).onSkip), Ui(t, Yi).removeEventListener("onError", Ui(t, Zi).onError), Ui(t, Yi).removeEventListener("onBannerNotFound", Ui(t, Zi).onError) }))) : this._setInterstitialState(i.FAILED) } }, { key: "showRewarded", value: function () { var t = this; Ui(this, Yi) ? (Ui(this, Yi).addEventListener("onStart", Ui(this, Vi).onStart), Ui(this, Yi).addEventListener("onSkip", Ui(this, Vi).onSkip), Ui(this, Yi).addEventListener("onReward", Ui(this, Vi).onReward), Ui(this, Yi).addEventListener("onError", Ui(this, Vi).onError), Ui(this, Yi).addEventListener("onBannerNotFound", Ui(this, Vi).onError), Ui(this, Yi).show().finally((function () { Ui(t, Yi).addEventListener("onStart", Ui(t, Vi).onStart), Ui(t, Yi).addEventListener("onSkip", Ui(t, Vi).onSkip), Ui(t, Yi).addEventListener("onReward", Ui(t, Vi).onReward), Ui(t, Yi).addEventListener("onError", Ui(t, Vi).onError), Ui(t, Yi).addEventListener("onBannerNotFound", Ui(t, Vi).onError) }))) : this._setRewardedState(a.FAILED) } }, { key: "clipboardRead", value: function () { var t = this, e = this._getPromiseDecorator(f.CLIPBOARD_READ); return e || (e = this._createPromiseDecorator(f.CLIPBOARD_READ), this._platformSdk.readTextFromClipboard((function (e) { e ? t._resolvePromiseDecorator(f.CLIPBOARD_READ, e) : t._rejectPromiseDecorator(f.CLIPBOARD_READ) }))), e.promise } }]) && ji(r.prototype, n), Object.defineProperty(r, "prototype", { writable: !1 }), y }(xe); function Ji(t, e) { var r = Object.keys(t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(t); e && (n = n.filter((function (e) { return Object.getOwnPropertyDescriptor(t, e).enumerable }))), r.push.apply(r, n) } return r } function qi(t) { for (var e = 1; e < arguments.length; e++) { var r = null != arguments[e] ? arguments[e] : {}; e % 2 ? Ji(Object(r), !0).forEach((function (e) { var n, o, i; n = t, o = e, i = r[e], (o = Qi(o)) in n ? Object.defineProperty(n, o, { value: i, enumerable: !0, configurable: !0, writable: !0 }) : n[o] = i })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r)) : Ji(Object(r)).forEach((function (e) { Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e)) })) } return t } function Xi(t) { return Xi = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, Xi(t) } function $i(t, e) { for (var r = 0; r < e.length; r++) { var n = e[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, Qi(n.key), n) } } function Qi(t) { var e = function (t, e) { if ("object" != Xi(t) || !t) return t; var r = t[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(t, "string"); if ("object" != Xi(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(t) }(t); return "symbol" == Xi(e) ? e : String(e) } function ta() { return ta = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (t, e, r) { var n = function (t, e) { for (; !Object.prototype.hasOwnProperty.call(t, e) && null !== (t = na(t));); return t }(t, e); if (n) { var o = Object.getOwnPropertyDescriptor(n, e); return o.get ? o.get.call(arguments.length < 3 ? t : r) : o.value } }, ta.apply(this, arguments) } function ea(t, e) { return ea = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t }, ea(t, e) } function ra(t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t } function na(t) { return na = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t) }, na(t) } function oa(t, e) { !function (t, e) { if (e.has(t)) throw new TypeError("Cannot initialize the same private elements twice on an object") }(t, e), e.add(t) } function ia(t, e, r) { if (!e.has(t)) throw new TypeError("attempted to get private field on non-instance"); return r } var aa = "userData", sa = new WeakSet, ua = new WeakSet; function ca() { var t = this; return new Promise((function (e, r) { t._platformSdk.api("user_data/retrieve", "POST", { key: aa }, (function (t) { t.error && "Key not found" !== t.error && r(t); var n = {}; try { t.jsondata && (n = JSON.parse(t.jsondata)) } catch (t) { } e(n) })) })) } function la(t) { if ("ok" === t.status) { this._isPlayerAuthorized = !0, this._defaultStorageType = u.PLATFORM_INTERNAL; var e = t.authResponse.details, r = e.pid, n = e.locale, o = e.nickname, i = e.first_name, a = e.last_name, s = e.avatars; r && (this._playerId = r), this._platformLanguage = n, this._playerName = [i, a].filter((function (t) { return !!t })).join(" ") || o, this._playerPhotos = []; var c = s.thumb_url, l = s.medium_url, f = s.large_url; c && this._playerPhotos.push(c), l && this._playerPhotos.push(l), f && this._playerPhotos.push(f) } } const fa = function (e) { !function (t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && ea(t, e) }(l, e); var r, n, o, s, c = (o = l, s = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (t) { return !1 } }(), function () { var t, e = na(o); if (s) { var r = na(this).constructor; t = Reflect.construct(e, arguments, r) } else t = e.apply(this, arguments); return function (t, e) { if (e && ("object" === Xi(e) || "function" == typeof e)) return e; if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined"); return ra(t) }(this, t) }); function l() { var t; !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, l); for (var e = arguments.length, r = new Array(e), n = 0; n < e; n++)r[n] = arguments[n]; return oa(ra(t = c.call.apply(c, [this].concat(r))), ua), oa(ra(t), sa), t } return r = l, (n = [{ key: "platformId", get: function () { return t.Y8 } }, { key: "isPlayerAuthorizationSupported", get: function () { return !0 } }, { key: "initialize", value: function () { var t = this; if (this._isInitialized) return Promise.resolve(); var e = this._getPromiseDecorator(f.INITIALIZE); return e || (e = this._createPromiseDecorator(f.INITIALIZE), this._options && this._options.gameId ? Ye("https://cdn.y8.com/api/sdk.js").then((function () { Ve("ID").then((function () { t._platformSdk = window.ID, t._platformSdk.Event.subscribe("id.init", (function () { t._platformSdk.ads.init(t._options.gameId), t._platformSdk.getLoginStatus((function (e) { ia(t, ua, la).call(t, e), t._isInitialized = !0, t._resolvePromiseDecorator(f.INITIALIZE) })) })), t._platformSdk.init({ appId: t._options.gameId }) })) })) : this._rejectPromiseDecorator(f.INITIALIZE, v)), e.promise } }, { key: "authorizePlayer", value: function () { var t = this; return this._isPlayerAuthorized ? Promise.resolve() : new Promise((function (e, r) { t._platformSdk.login((function (n) { ia(t, ua, la).call(t, n), "ok" === n.status ? e() : r() })) })) } }, { key: "isStorageSupported", value: function (t) { return t === u.PLATFORM_INTERNAL || ta(na(l.prototype), "isStorageSupported", this).call(this, t) } }, { key: "isStorageAvailable", value: function (t) { return t === u.PLATFORM_INTERNAL || ta(na(l.prototype), "isStorageAvailable", this).call(this, t) } }, { key: "getDataFromStorage", value: function (t, e, r) { var n = this; return e === u.PLATFORM_INTERNAL ? new Promise((function (e, o) { ia(n, sa, ca).call(n).then((function (n) { var o = (Array.isArray(t) ? t : [t]).map((function (t) { var e = n[t]; return r || "object" !== Xi(e) || null === e ? null != e ? e : null : JSON.stringify(e) })); e(o) })).catch(o) })) : ta(na(l.prototype), "getDataFromStorage", this).call(this, t, e, r) } }, { key: "setDataToStorage", value: function (t, e, r) { var n = this; return r === u.PLATFORM_INTERNAL ? new Promise((function (r, o) { ia(n, sa, ca).call(n).then((function (i) { var a = qi({}, i); if (Array.isArray(t)) for (var s = 0; s < t.length; s++)a[t[s]] = e[s]; else a[t] = e; n._platformSdk.api("user_data/submit", "POST", { key: aa, value: JSON.stringify(a) }, (function (t) { "ok" === t.status ? r() : o(t) })) })).catch(o) })) : ta(na(l.prototype), "setDataToStorage", this).call(this, t, e, r) } }, { key: "deleteDataFromStorage", value: function (t, e) { var r = this; return e === u.PLATFORM_INTERNAL ? new Promise((function (e, n) { ia(r, sa, ca).call(r).then((function (o) { var i = qi({}, o); if (Array.isArray(t)) for (var a = 0; a < t.length; a++)delete i[t[a]]; else delete i[t]; r._platformSdk.api("user_data/submit", "POST", { key: aa, value: JSON.stringify(i) }, (function (t) { "ok" === t.status ? e() : n(t) })) })).catch(n) })) : ta(na(l.prototype), "deleteDataFromStorage", this).call(this, t, e) } }, { key: "showInterstitial", value: function () { var t = this; this._setInterstitialState(i.OPENED), this._platformSdk.ads.display((function () { t._platformSdk.ads.strategy ? t._setInterstitialState(i.CLOSED) : t._setInterstitialState(i.FAILED) })) } }, { key: "showRewarded", value: function () { var t = this; this._setRewardedState(a.OPENED), this._platformSdk.ads.display((function () { t._platformSdk.ads.strategy ? (t._setRewardedState(a.REWARDED), t._setRewardedState(a.CLOSED)) : t._setRewardedState(a.FAILED) })) } }]) && $i(r.prototype, n), Object.defineProperty(r, "prototype", { writable: !1 }), l }(xe); function pa(t) { return pa = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, pa(t) } function ya(t, e) { var r = Object.keys(t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(t); e && (n = n.filter((function (e) { return Object.getOwnPropertyDescriptor(t, e).enumerable }))), r.push.apply(r, n) } return r } function da(t, e) { for (var r = 0; r < e.length; r++) { var n = e[r]; n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, ha(n.key), n) } } function ha(t) { var e = function (t, e) { if ("object" != pa(t) || !t) return t; var r = t[Symbol.toPrimitive]; if (void 0 !== r) { var n = r.call(t, "string"); if ("object" != pa(n)) return n; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(t) }(t); return "symbol" == pa(e) ? e : String(e) } function ma(t, e) { _a(t, e), e.add(t) } function va(t, e, r) { _a(t, e), e.set(t, r) } function _a(t, e) { if (e.has(t)) throw new TypeError("Cannot initialize the same private elements twice on an object") } function ba(t, e, r) { return function (t, e, r) { if (e.set) e.set.call(t, r); else { if (!e.writable) throw new TypeError("attempted to set read only private field"); e.value = r } }(t, wa(t, e, "set"), r), r } function ga(t, e, r) { if (!e.has(t)) throw new TypeError("attempted to get private field on non-instance"); return r } function Sa(t, e) { return function (t, e) { return e.get ? e.get.call(t) : e.value }(t, wa(t, e, "get")) } function wa(t, e, r) { if (!e.has(t)) throw new TypeError("attempted to " + r + " private field on non-instance"); return e.get(t) } var Ea = new WeakMap, Pa = new WeakMap, Aa = new WeakMap, Oa = new WeakMap, ka = new WeakSet, Ia = new WeakSet, Ta = new WeakSet; function Da() { var e = t.MOCK; if (this._options && this._options.forciblySetPlatformId) e = ga(this, Ia, Ra).call(this, this._options.forciblySetPlatformId.toLowerCase()); else { var r = new URL(window.location.href), n = ["y", "a", "n", "d", "e", "x", ".", "n", "e", "t"].join(""); r.searchParams.has("platform_id") ? e = ga(this, Ia, Ra).call(this, r.searchParams.get("platform_id").toLowerCase()) : r.hostname.includes(n) || r.hash.includes("yandex") ? e = t.YANDEX : r.hostname.includes("crazygames.") || r.hostname.includes("1001juegos.com") ? e = t.CRAZY_GAMES : r.hostname.includes("gamedistribution.com") ? e = t.GAME_DISTRIBUTION : r.hostname.includes("wortal.ai") ? e = t.WORTAL : r.searchParams.has("api_id") && r.searchParams.has("viewer_id") && r.searchParams.has("auth_key") || r.searchParams.has("vk_app_id") ? e = t.VK : r.searchParams.has("app_id") && r.searchParams.has("player_id") && r.searchParams.has("game_sid") && r.searchParams.has("auth_key") ? e = t.ABSOLUTE_GAMES : r.searchParams.has("playdeck") ? e = t.PLAYDECK : r.hash.includes("tgWebAppData") && (e = t.TELEGRAM) } if (!this._options || !this._options.gameId) { var o, i = new URL(window.location.href); (i.searchParams.has("game_id") || i.searchParams.has("vk_app_id")) && (this._options || (this._options = {}), this._options.gameId = null !== (o = i.searchParams.get("game_id")) && void 0 !== o ? o : i.searchParams.get("vk_app_id")) } switch (e) { case t.VK: ba(this, Aa, new sr(this._options && this._options.platforms && this._options.platforms[t.VK])); break; case t.VK_PLAY: ba(this, Aa, new Yn(this._options && this._options.platforms && this._options.platforms[t.VK_PLAY])); break; case t.YANDEX: ba(this, Aa, new Tr(this._options && this._options.platforms && this._options.platforms[t.YANDEX])); break; case t.CRAZY_GAMES: ba(this, Aa, new Jr(this._options && this._options.platforms && this._options.platforms[t.CRAZY_GAMES])); break; case t.ABSOLUTE_GAMES: ba(this, Aa, new un(this._options && this._options.platforms && this._options.platforms[t.ABSOLUTE_GAMES])); break; case t.GAME_DISTRIBUTION: ba(this, Aa, new bn(this._options && this._options.platforms && this._options.platforms[t.GAME_DISTRIBUTION])); break; case t.OK: ba(this, Aa, new Ko(this._options && this._options.platforms && this._options.platforms[t.OK])); break; case t.PLAYGAMA: ba(this, Aa, new ti(this._options && this._options.platforms && this._options.platforms[t.PLAYGAMA])); break; case t.WORTAL: ba(this, Aa, new Ri(this._options && this._options.platforms && this._options.platforms[t.WORTAL])); break; case t.PLAYDECK: ba(this, Aa, new hi(this._options && this._options.platforms && this._options.platforms[t.PLAYDECK])); break; case t.TELEGRAM: ba(this, Aa, new Ki(this._options && this._options.platforms && this._options.platforms[t.TELEGRAM])); break; case t.Y8: ba(this, Aa, new fa(this._options && this._options.platforms && this._options.platforms[t.Y8])); break; default: ba(this, Aa, new xe) } } function Ra(e) { for (var r = Object.values(t), n = 0; n < r.length; n++)if (e === r[n]) return e; return t.MOCK } function La(t) { return Sa(this, Ea) || console.error(p), Sa(this, Oa)[t] } const ja = function () { function r() { !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, r), ma(this, Ta), ma(this, Ia), ma(this, ka), va(this, Ea, { writable: !0, value: !1 }), va(this, Pa, { writable: !0, value: null }), va(this, Aa, { writable: !0, value: null }), va(this, Oa, { writable: !0, value: {} }) } var f, p; return f = r, p = [{ key: "version", get: function () { return "1.16.0" } }, { key: "isInitialized", get: function () { return Sa(this, Ea) } }, { key: "platform", get: function () { return ga(this, Ta, La).call(this, e.PLATFORM) } }, { key: "player", get: function () { return ga(this, Ta, La).call(this, e.PLAYER) } }, { key: "game", get: function () { return ga(this, Ta, La).call(this, e.GAME) } }, { key: "storage", get: function () { return ga(this, Ta, La).call(this, e.STORAGE) } }, { key: "advertisement", get: function () { return ga(this, Ta, La).call(this, e.ADVERTISEMENT) } }, { key: "social", get: function () { return ga(this, Ta, La).call(this, e.SOCIAL) } }, { key: "device", get: function () { return ga(this, Ta, La).call(this, e.DEVICE) } }, { key: "leaderboard", get: function () { return ga(this, Ta, La).call(this, e.LEADERBOARD) } }, { key: "payments", get: function () { return ga(this, Ta, La).call(this, e.PAYMENTS) } }, { key: "remoteConfig", get: function () { return ga(this, Ta, La).call(this, e.REMOTE_CONFIG) } }, { key: "clipboard", get: function () { return ga(this, Ta, La).call(this, e.CLIPBOARD) } }, { key: "PLATFORM_ID", get: function () { return t } }, { key: "PLATFORM_MESSAGE", get: function () { return l } }, { key: "MODULE_NAME", get: function () { return e } }, { key: "EVENT_NAME", get: function () { return n } }, { key: "INTERSTITIAL_STATE", get: function () { return i } }, { key: "REWARDED_STATE", get: function () { return a } }, { key: "BANNER_STATE", get: function () { return s } }, { key: "STORAGE_TYPE", get: function () { return u } }, { key: "VISIBILITY_STATE", get: function () { return o } }, { key: "DEVICE_TYPE", get: function () { return c } }, { key: "initialize", value: function (t) { var r = this; return Sa(this, Ea) ? Promise.resolve() : (Sa(this, Pa) || (ba(this, Pa, new D), this._options = function (t) { for (var e = 1; e < arguments.length; e++) { var r = null != arguments[e] ? arguments[e] : {}; e % 2 ? ya(Object(r), !0).forEach((function (e) { var n, o, i; n = t, o = e, i = r[e], (o = ha(o)) in n ? Object.defineProperty(n, o, { value: i, enumerable: !0, configurable: !0, writable: !0 }) : n[o] = i })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r)) : ya(Object(r)).forEach((function (e) { Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e)) })) } return t }({}, t), ga(this, ka, Da).call(this), Sa(this, Aa).initialize().then((function () { Sa(r, Oa)[e.PLATFORM] = new H(Sa(r, Aa)), Sa(r, Oa)[e.PLAYER] = new J(Sa(r, Aa)), Sa(r, Oa)[e.GAME] = new ot(Sa(r, Aa)), Sa(r, Oa)[e.STORAGE] = new lt(Sa(r, Aa)), Sa(r, Oa)[e.ADVERTISEMENT] = new Qt(Sa(r, Aa)), Sa(r, Oa)[e.SOCIAL] = new ie(Sa(r, Aa)), Sa(r, Oa)[e.DEVICE] = new fe(Sa(r, Aa)), Sa(r, Oa)[e.LEADERBOARD] = new ve(Sa(r, Aa)), Sa(r, Oa)[e.PAYMENTS] = new Ee(Sa(r, Aa)), Sa(r, Oa)[e.REMOTE_CONFIG] = new Te(Sa(r, Aa)), Sa(r, Oa)[e.CLIPBOARD] = new Ce(Sa(r, Aa)), ba(r, Ea, !0), console.info("%c PlaygamaBridge v.".concat(r.version, " initialized. "), "background: #01A5DA; color: white"), Sa(r, Pa) && (Sa(r, Pa).resolve(), ba(r, Pa, null)) }))), Sa(this, Pa).promise) } }], p && da(f.prototype, p), Object.defineProperty(f, "prototype", { writable: !1 }), r }(); window.bridge = new ja, window.playgamaBridge = window.bridge })() })();